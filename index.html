<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>Studio Criativo Tati Motta - Presentes Personalizados √önicos | Camisetas, Canecas, Ecobags</title>
    <meta name="description" content="Presentes personalizados √∫nicos feitos com carinho. Camisetas, canecas, ecobags e kits exclusivos. Entrega em todo Brasil. Or√ßamento gr√°tis pelo WhatsApp!">
    <meta name="keywords" content="presentes personalizados, camisetas personalizadas, canecas personalizadas, ecobags, kits presente, artesanal, personaliza√ß√£o">
    <meta name="author" content="Studio Criativo Tati Motta">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://studiocriativotati.com.br">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Studio Criativo Tati Motta - Presentes Personalizados √önicos">
    <meta property="og:description" content="Transforme ideias em presentes √∫nicos! Produtos personalizados feitos com carinho especialmente para voc√™.">
    <meta property="og:image" content="keys/studio-social?prompt=Studio%20criativo%20com%20produtos%20personalizados%2C%20camisetas%20e%20canecas%20em%20ambiente%20acolhedor">
    <meta property="og:url" content="https://studiocriativotati.com.br">
    <meta property="og:site_name" content="Studio Criativo Tati Motta">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Studio Criativo Tati Motta - Presentes Personalizados">
    <meta name="twitter:description" content="Presentes personalizados √∫nicos feitos com carinho. Seu estilo, do seu jeito!">
    <meta name="twitter:image" content="keys/studio-social?prompt=Studio%20criativo%20com%20produtos%20personalizados">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üé®</text></svg>">
    
    <!-- Preconnect for Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    
    <!-- CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Schema Markup for Products -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "LocalBusiness",
        "name": "Studio Criativo Tati Motta",
        "description": "Studio especializado em produtos personalizados √∫nicos",
        "url": "https://studiocriativotati.com.br",
        "telephone": "+55-22-99880-9406",
        "email": "contato@studiocriativotati.com.br",
        "address": {
            "@type": "PostalAddress",
            "addressCountry": "BR",
            "addressRegion": "RJ"
        },
        "geo": {
            "@type": "GeoCoordinates",
            "latitude": -22.9068,
            "longitude": -43.1729
        },
        "openingHours": "Mo-Fr 08:00-18:00, Sa 08:00-12:00",
        "priceRange": "R$ 15 - R$ 150",
        "hasOfferCatalog": {
            "@type": "OfferCatalog",
            "name": "Produtos Personalizados",
            "itemListElement": [
                {
                    "@type": "Product",
                    "name": "Camisetas Personalizadas",
                    "description": "Camisetas 100% algod√£o com design exclusivo",
                    "offers": {
                        "@type": "Offer",
                        "price": "45.00",
                        "priceCurrency": "BRL"
                    }
                },
                {
                    "@type": "Product", 
                    "name": "Canecas Personalizadas",
                    "description": "Canecas de cer√¢mica com personaliza√ß√£o √∫nica",
                    "offers": {
                        "@type": "Offer",
                        "price": "35.00",
                        "priceCurrency": "BRL"
                    }
                }
            ]
        }
    }
    </script>
    
    <!-- Facebook Pixel -->
    <script>
        !function(f,b,e,v,n,t,s)
        {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', 'YOUR_PIXEL_ID');
        fbq('track', 'PageView');
    </script>
    
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'GA_MEASUREMENT_ID');
    </script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'nunito': ['Nunito', 'sans-serif'],
                    },
                    colors: {
                        'roxo': {
                            50: '#f9f6ff',
                            100: '#f0ebff',
                            200: '#e4d9ff',
                            300: '#d1bfff',
                            400: '#b999ff',
                            500: '#9d6dff',
                            600: '#8b4dff',
                            700: '#7533e0',
                            800: '#5f2bb0',
                            900: '#4a2280',
                        },
                        'lilas': {
                            50: '#faf8ff',
                            100: '#f3efff',
                            200: '#e8dfff',
                            300: '#d4c2ff',
                            400: '#be9cff',
                            500: '#a775ff',
                            600: '#8f4eff',
                            700: '#7a2ee6',
                            800: '#6625b8',
                            900: '#521e8a',
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        body { font-family: 'Nunito', sans-serif; }
        .hero-gradient { background: linear-gradient(135deg, #faf8ff 0%, #f3efff 100%); }
        .product-card { transition: all 0.3s ease; }
        .product-card:hover { transform: translateY(-8px); box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 10px 10px -5px rgb(0 0 0 / 0.04); }
        
        /* Floating Elements - Fixed positioning */
        .floating-buttons {
            position: fixed !important;
            bottom: 25px !important;
            right: 25px !important;
            z-index: 1000 !important;
            display: flex !important;
            flex-direction: column !important;
            gap: 16px !important;
        }

        .whatsapp-float, .cart-float, .wishlist-float {
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            border-radius: 50% !important;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15) !important;
            animation: pulse 2s infinite !important;
            transition: all 0.3s ease !important;
            position: relative !important;
        }
        
        .whatsapp-float { 
            width: 56px !important;
            height: 56px !important;
        }
        .cart-float { 
            width: 48px !important;
            height: 48px !important;
        }
        .wishlist-float { 
            width: 48px !important;
            height: 48px !important;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        /* Lazy Loading */
        .lazy-loading {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        /* Item count badge */
        .item-count {
            position: absolute !important;
            top: -8px !important;
            right: -8px !important;
            background: #ef4444 !important;
            color: white !important;
            border-radius: 50% !important;
            width: 20px !important;
            height: 20px !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            font-size: 12px !important;
            font-weight: bold !important;
            border: 2px solid white !important;
        }

        /* Touch-friendly mobile buttons */
        @media (max-width: 768px) {
            .mobile-touch-btn {
                min-height: 44px;
                min-width: 44px;
                padding: 12px 16px;
            }
            
            .product-card {
                margin-bottom: 20px;
            }
            
            .mobile-nav-menu {
                padding: 16px;
            }
            
            .mobile-nav-menu a {
                padding: 16px 0;
                font-size: 18px;
                border-bottom: 1px solid #e5e7eb;
            }

            .floating-buttons {
                bottom: 20px;
                right: 20px;
                gap: 12px;
            }
        }
        
        /* Breadcrumbs */
        .breadcrumb {
            font-size: 14px;
            color: #6b7280;
        }
        .breadcrumb a:hover {
            color: #9d6dff;
        }
        
        /* Search */
        .search-results {
            max-height: 300px;
            overflow-y: auto;
            z-index: 50;
        }
        
        /* Zoom Image Modal */
        .zoom-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .zoom-modal img {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
        }
        
        /* Wishlist/Cart indicators */
        .item-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ef4444;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }
        
        /* Reviews Stars */
        .rating-stars {
            color: #fbbf24;
        }
        
        /* Newsletter signup */
        .newsletter-success {
            background: #10b981;
            color: white;
            padding: 12px;
            border-radius: 8px;
            margin-top: 8px;
        }
        
        /* FAQ Accordion */
        .faq-item {
            border-bottom: 1px solid #e5e7eb;
        }
        .faq-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        .faq-content.open {
            max-height: 200px;
        }
        
        /* Loading states */
        .loading-spinner {
            border: 2px solid #f3f4f6;
            border-top: 2px solid #9d6dff;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Form validation */
        .field-error {
            border-color: #ef4444;
        }
        .field-success {
            border-color: #10b981;
        }
        
        /* Advanced filters */
        .filter-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);
            z-index: 40;
        }
        
        /* Product gallery */
        .product-gallery {
            position: relative;
        }
        .gallery-thumbnails {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }
        .gallery-thumb {
            width: 60px;
            height: 60px;
            border: 2px solid transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: border-color 0.2s;
        }
        .gallery-thumb.active {
            border-color: #9d6dff;
        }
    </style>
</head>
<body class="bg-white">
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 bg-roxo-600 text-white px-4 py-2 rounded">
        Pular para o conte√∫do principal
    </a>

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-40" role="banner">
        <nav class="container mx-auto px-4 py-4" role="navigation" aria-label="Navega√ß√£o principal">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-2">
                    <div class="w-10 h-10 bg-gradient-to-br from-lilas-400 to-roxo-500 rounded-full flex items-center justify-center">
                        <i class="fas fa-palette text-white text-sm" aria-hidden="true"></i>
                    </div>
                    <h1 class="text-xl md:text-2xl font-bold text-roxo-800">Studio Criativo Tati Motta</h1>
                </div>
                
                <!-- Search Bar -->
                <div class="hidden lg:flex relative mx-8 flex-1 max-w-md">
                    <input type="text" 
                           id="searchInput" 
                           placeholder="Buscar produtos..." 
                           class="w-full border border-roxo-200 rounded-full px-4 py-2 pr-10 focus:ring-2 focus:ring-lilas-300 focus:border-lilas-300"
                           aria-label="Buscar produtos">
                    <button class="absolute right-3 top-1/2 transform -translate-y-1/2 text-roxo-500" aria-label="Buscar">
                        <i class="fas fa-search"></i>
                    </button>
                    <div id="searchResults" class="search-results absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg hidden mt-1"></div>
                </div>
                
                <div class="hidden md:flex space-x-6">
                    <a href="#" onclick="event.preventDefault(); showSection('home'); return false;" class="nav-link text-roxo-700 hover:text-lilas-500 font-medium transition-colors mobile-touch-btn">Home</a>
                    <a href="#" onclick="event.preventDefault(); showSection('catalogo'); return false;" class="nav-link text-roxo-700 hover:text-lilas-500 font-medium transition-colors mobile-touch-btn">Cat√°logo</a>
                    <a href="#" onclick="event.preventDefault(); showSection('personalizar'); return false;" class="nav-link text-roxo-700 hover:text-lilas-500 font-medium transition-colors mobile-touch-btn">Personalizar</a>
                    <a href="#" onclick="event.preventDefault(); showSection('sobre'); return false;" class="nav-link text-roxo-700 hover:text-lilas-500 font-medium transition-colors mobile-touch-btn">Sobre</a>
                    <a href="#" onclick="event.preventDefault(); showSection('blog'); return false;" class="nav-link text-roxo-700 hover:text-lilas-500 font-medium transition-colors mobile-touch-btn">Blog</a>
                    <a href="#" onclick="event.preventDefault(); showSection('contato'); return false;" class="nav-link text-roxo-700 hover:text-lilas-500 font-medium transition-colors mobile-touch-btn">Contato</a>
                </div>
                
                <button class="md:hidden text-roxo-700 mobile-touch-btn" onclick="toggleMobileMenu()" aria-label="Menu">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
            
            <!-- Mobile Menu -->
            <div id="mobileMenu" class="hidden md:hidden mt-4 mobile-nav-menu">
                <!-- Mobile Search -->
                <div class="relative mb-4">
                    <input type="text" 
                           id="mobileSearchInput" 
                           placeholder="Buscar produtos..." 
                           class="w-full border border-roxo-200 rounded-full px-4 py-3 pr-10 focus:ring-2 focus:ring-lilas-300">
                    <button class="absolute right-3 top-1/2 transform -translate-y-1/2 text-roxo-500">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                
                <a href="#" onclick="event.preventDefault(); showSection('home'); return false;" class="block text-roxo-700 hover:text-lilas-500 font-medium py-4 border-b border-gray-200">Home</a>
                <a href="#" onclick="event.preventDefault(); showSection('catalogo'); return false;" class="block text-roxo-700 hover:text-lilas-500 font-medium py-4 border-b border-gray-200">Cat√°logo</a>
                <a href="#" onclick="event.preventDefault(); showSection('personalizar'); return false;" class="block text-roxo-700 hover:text-lilas-500 font-medium py-4 border-b border-gray-200">Personalizar</a>
                <a href="#" onclick="event.preventDefault(); showSection('sobre'); return false;" class="block text-roxo-700 hover:text-lilas-500 font-medium py-4 border-b border-gray-200">Sobre</a>
                <a href="#" onclick="event.preventDefault(); showSection('blog'); return false;" class="block text-roxo-700 hover:text-lilas-500 font-medium py-4 border-b border-gray-200">Blog</a>
                <a href="#" onclick="event.preventDefault(); showSection('contato'); return false;" class="block text-roxo-700 hover:text-lilas-500 font-medium py-4">Contato</a>
            </div>
        </nav>
    </header>

    <!-- Breadcrumbs -->
    <nav id="breadcrumbs" class="container mx-auto px-4 py-2 text-sm hidden" aria-label="Breadcrumb">
        <ol class="flex space-x-2">
            <li><a href="#" onclick="showSection('home')" class="breadcrumb hover:text-roxo-500">Home</a></li>
            <li><span class="breadcrumb">/</span></li>
            <li id="currentPage" class="breadcrumb font-medium">Home</li>
        </ol>
    </nav>

    <main id="main-content">
        <!-- Home Section -->
        <section id="home" class="section">
            <!-- Newsletter Bar -->
            <div class="bg-lilas-500 text-white text-center py-2">
                <p class="text-sm">üìß <strong>Cadastre-se</strong> e receba ofertas exclusivas! 
                   <button onclick="showNewsletterModal()" class="underline hover:no-underline ml-2">Clique aqui</button>
                   <span class="ml-4">üì± Siga no Instagram: 
                   <a href="https://www.instagram.com/tatimottastudiocriativo/" target="_blank" rel="noopener noreferrer" class="underline hover:no-underline">@tatimottastudiocriativo</a>
                   </span>
                </p>
            </div>

            <!-- Hero -->
            <div class="hero-gradient py-20">
                <div class="container mx-auto px-4 text-center">
                    <h2 class="text-4xl md:text-6xl font-bold text-roxo-800 mb-6">
                        Transforme ideias em <span class="text-lilas-500">presentes √∫nicos!</span>
                    </h2>
                    <p class="text-lg md:text-xl text-roxo-600 mb-8 max-w-2xl mx-auto">
                        Criamos produtos personalizados feitos com carinho especialmente para voc√™. 
                        <strong>Seu estilo, do seu jeito.</strong>
                    </p>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <button onclick="openWhatsApp('Ol√°! Gostaria de fazer um pedido personalizado üòä')" 
                                class="bg-lilas-500 hover:bg-lilas-600 text-white px-8 py-4 rounded-full font-bold text-lg transition-all hover:scale-105 shadow-lg mobile-touch-btn">
                            <i class="fas fa-heart mr-2"></i>Pedir o meu agora
                        </button>
                        <button onclick="showSection('catalogo')" 
                                class="bg-white hover:bg-roxo-50 text-roxo-700 border-2 border-roxo-200 px-8 py-4 rounded-full font-bold text-lg transition-all mobile-touch-btn">
                            <i class="fas fa-search mr-2"></i>Ver Cat√°logo
                        </button>
                    </div>
                    
                    <!-- Social Proof -->
                    <div class="mt-12 flex justify-center items-center space-x-8">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-roxo-800">500+</div>
                            <div class="text-sm text-roxo-600">Clientes Satisfeitos</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-roxo-800">1000+</div>
                            <div class="text-sm text-roxo-600">Produtos Entregues</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-roxo-800">5‚òÖ</div>
                            <div class="text-sm text-roxo-600">Avalia√ß√£o M√©dia</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Produtos Destaque -->
            <div class="py-16 bg-white">
                <div class="container mx-auto px-4">
                    <h3 class="text-3xl font-bold text-center text-roxo-800 mb-12">Nossos Destaques</h3>
                    <div id="featuredProductsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <!-- Featured products will be loaded dynamically from admin panel -->
                    </div>
                    
                    <div class="text-center mt-8">
                        <button onclick="showSection('catalogo')" 
                                class="bg-lilas-500 hover:bg-lilas-600 text-white px-8 py-3 rounded-full font-bold transition-all mobile-touch-btn">
                            Ver Todos os Produtos <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Depoimentos -->
            <div class="py-16 bg-roxo-50">
                <div class="container mx-auto px-4">
                    <h3 class="text-3xl font-bold text-center text-roxo-800 mb-12">O que nossos clientes dizem</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Enhanced testimonials with photos and verified badges -->
                        <div class="bg-white p-6 rounded-2xl shadow-lg">
                            <div class="flex items-center mb-4">
                                <img src="keys/cliente1?prompt=Foto%20de%20perfil%20mulher%20sorrindo%2C%20brasileira%2C%20jovem" 
                                     alt="Maria Silva" 
                                     class="w-12 h-12 rounded-full object-cover mr-4"
                                     loading="lazy">
                                <div>
                                    <h5 class="font-bold text-roxo-800">Maria Silva</h5>
                                    <div class="rating-stars text-sm">
                                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                                    </div>
                                    <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded mt-1 inline-block">‚úì Compra Verificada</span>
                                </div>
                            </div>
                            <p class="text-roxo-600 italic">"Adorei minha caneca personalizada! O atendimento foi incr√≠vel e o produto chegou exatamente como eu imaginava. Super recomendo!"</p>
                            <div class="mt-3 text-xs text-gray-500">H√° 2 semanas</div>
                        </div>
                        
                        <div class="bg-white p-6 rounded-2xl shadow-lg">
                            <div class="flex items-center mb-4">
                                <img src="keys/cliente2?prompt=Foto%20de%20perfil%20homem%20sorrindo%2C%20brasileiro%2C%20adulto" 
                                     alt="Jo√£o Santos" 
                                     class="w-12 h-12 rounded-full object-cover mr-4"
                                     loading="lazy">
                                <div>
                                    <h5 class="font-bold text-roxo-800">Jo√£o Santos</h5>
                                    <div class="rating-stars text-sm">
                                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                                    </div>
                                    <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded mt-1 inline-block">‚úì Compra Verificada</span>
                                </div>
                            </div>
                            <p class="text-roxo-600 italic">"Presente perfeito para minha esposa! A qualidade √© excelente e o design ficou lindo. J√° virei cliente fiel!"</p>
                            <div class="mt-3 text-xs text-gray-500">H√° 1 semana</div>
                        </div>
                        
                        <div class="bg-white p-6 rounded-2xl shadow-lg">
                            <div class="flex items-center mb-4">
                                <img src="keys/cliente3?prompt=Foto%20de%20perfil%20mulher%20jovem%20sorrindo%2C%20brasileira" 
                                     alt="Ana Costa" 
                                     class="w-12 h-12 rounded-full object-cover mr-4"
                                     loading="lazy">
                                <div>
                                    <h5 class="font-bold text-roxo-800">Ana Costa</h5>
                                    <div class="rating-stars text-sm">
                                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                                    </div>
                                    <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded mt-1 inline-block">‚úì Compra Verificada</span>
                                </div>
                            </div>
                            <p class="text-roxo-600 italic">"Kit infantil maravilhoso! Minha filha amou as toalhinhas personalizadas. Entrega r√°pida e produto de qualidade!"</p>
                            <div class="mt-3 text-xs text-gray-500">H√° 3 dias</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FAQ Section -->
            <div class="py-16 bg-white">
                <div class="container mx-auto px-4">
                    <h3 class="text-3xl font-bold text-center text-roxo-800 mb-12">Perguntas Frequentes</h3>
                    <div class="max-w-3xl mx-auto">
                        <div class="faq-item">
                            <button onclick="toggleFAQ(this)" class="w-full text-left py-4 flex justify-between items-center font-semibold text-roxo-800">
                                <span>Qual o prazo de entrega?</span>
                                <i class="fas fa-chevron-down transform transition-transform"></i>
                            </button>
                            <div class="faq-content pb-4">
                                <p class="text-roxo-600">O prazo √© de 7 a 15 dias √∫teis dependendo da complexidade do produto. Produtos simples saem mais r√°pido!</p>
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <button onclick="toggleFAQ(this)" class="w-full text-left py-4 flex justify-between items-center font-semibold text-roxo-800">
                                <span>Posso enviar minha pr√≥pria arte?</span>
                                <i class="fas fa-chevron-down transform transition-transform"></i>
                            </button>
                            <div class="faq-content pb-4">
                                <p class="text-roxo-600">Claro! Voc√™ pode enviar sua arte pelo WhatsApp. Trabalhamos com arquivos em alta resolu√ß√£o (PNG, JPG, PDF vetorial).</p>
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <button onclick="toggleFAQ(this)" class="w-full text-left py-4 flex justify-between items-center font-semibold text-roxo-800">
                                <span>Como funciona o pagamento?</span>
                                <i class="fas fa-chevron-down transform transition-transform"></i>
                            </button>
                            <div class="faq-content pb-4">
                                <p class="text-roxo-600">Aceitamos PIX (desconto de 5%) e cart√£o via Mercado Pago em at√© 12x sem juros. Pagamento seguro e protegido!</p>
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <button onclick="toggleFAQ(this)" class="w-full text-left py-4 flex justify-between items-center font-semibold text-roxo-800">
                                <span>Voc√™s entregam em todo Brasil?</span>
                                <i class="fas fa-chevron-down transform transition-transform"></i>
                            </button>
                            <div class="faq-content pb-4">
                                <p class="text-roxo-600">Sim! Entregamos em todo territ√≥rio nacional. Frete gr√°tis para pedidos acima de R$ 100,00.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Guarantees -->
            <div class="py-16 bg-lilas-50">
                <div class="container mx-auto px-4">
                    <h3 class="text-3xl font-bold text-center text-roxo-800 mb-12">Nossas Garantias</h3>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                        <div class="text-center">
                            <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-shield-alt text-green-500 text-2xl"></i>
                            </div>
                            <h4 class="font-bold text-roxo-800 mb-2">Satisfa√ß√£o Garantida</h4>
                            <p class="text-roxo-600 text-sm">Se n√£o gostar, refazemos ou devolvemos seu dinheiro</p>
                        </div>
                        
                        <div class="text-center">
                            <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-truck text-blue-500 text-2xl"></i>
                            </div>
                            <h4 class="font-bold text-roxo-800 mb-2">Frete Gr√°tis</h4>
                            <p class="text-roxo-600 text-sm">Para pedidos acima de R$ 100 em todo o Brasil</p>
                        </div>
                        
                        <div class="text-center">
                            <div class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-medal text-yellow-500 text-2xl"></i>
                            </div>
                            <h4 class="font-bold text-roxo-800 mb-2">Qualidade Premium</h4>
                            <p class="text-roxo-600 text-sm">Materiais selecionados e produ√ß√£o artesanal</p>
                        </div>
                        
                        <div class="text-center">
                            <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-headset text-purple-500 text-2xl"></i>
                            </div>
                            <h4 class="font-bold text-roxo-800 mb-2">Suporte R√°pido</h4>
                            <p class="text-roxo-600 text-sm">Atendimento pelo WhatsApp em minutos</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Cat√°logo Section -->
        <section id="catalogo" class="section hidden">
            <div class="py-16">
                <div class="container mx-auto px-4">
                    <h2 class="text-4xl font-bold text-center text-roxo-800 mb-12">Nosso Cat√°logo</h2>
                    
                    <!-- Advanced Filters -->
                    <div class="bg-white rounded-lg shadow-md p-6 mb-8">
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <!-- Category Filter -->
                            <div class="relative">
                                <label class="block text-sm font-medium text-roxo-700 mb-1">Categoria</label>
                                <select id="categoryFilter" onchange="applyFilters()" 
                                        class="w-full border border-roxo-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-lilas-300">
                                    <option value="">Todas as categorias</option>
                                    <option value="camisas">Camisas</option>
                                    <option value="canecas">Canecas</option>
                                    <option value="ecobags">Ecobags</option>
                                    <option value="kits">Kits</option>
                                    <option value="toalhinhas">Toalhinhas</option>
                                </select>
                            </div>
                            
                            <!-- Price Filter -->
                            <div class="relative">
                                <label class="block text-sm font-medium text-roxo-700 mb-1">Pre√ßo</label>
                                <select id="priceFilter" onchange="applyFilters()" 
                                        class="w-full border border-roxo-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-lilas-300">
                                    <option value="">Todos os pre√ßos</option>
                                    <option value="0-30">At√© R$ 30</option>
                                    <option value="30-60">R$ 30 - R$ 60</option>
                                    <option value="60-100">R$ 60 - R$ 100</option>
                                    <option value="100+">Acima de R$ 100</option>
                                </select>
                            </div>
                            
                            <!-- Sort Filter -->
                            <div class="relative">
                                <label class="block text-sm font-medium text-roxo-700 mb-1">Ordenar por</label>
                                <select id="sortFilter" onchange="applyFilters()" 
                                        class="w-full border border-roxo-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-lilas-300">
                                    <option value="relevance">Relev√¢ncia</option>
                                    <option value="price-low">Menor pre√ßo</option>
                                    <option value="price-high">Maior pre√ßo</option>
                                    <option value="newest">Mais novos</option>
                                    <option value="rating">Melhor avaliados</option>
                                </select>
                            </div>
                            
                            <!-- Quick Filters -->
                            <div>
                                <label class="block text-sm font-medium text-roxo-700 mb-1">Filtros r√°pidos</label>
                                <div class="flex flex-wrap gap-2">
                                    <button onclick="toggleQuickFilter('frete-gratis')" 
                                            class="quick-filter-btn px-3 py-1 text-xs border border-roxo-200 rounded-full hover:bg-roxo-50 transition-colors"
                                            data-filter="frete-gratis">
                                        üöö Frete Gr√°tis
                                    </button>
                                    <button onclick="toggleQuickFilter('mais-vendidos')" 
                                            class="quick-filter-btn px-3 py-1 text-xs border border-roxo-200 rounded-full hover:bg-roxo-50 transition-colors"
                                            data-filter="mais-vendidos">
                                        üî• Mais Vendidos
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex justify-between items-center mt-4">
                            <div id="resultsCount" class="text-sm text-roxo-600">
                                Mostrando <span id="currentResults">0</span> de <span id="totalResults">0</span> produtos
                            </div>
                            <button onclick="clearAllFilters()" class="text-sm text-lilas-500 hover:text-lilas-600 font-medium">
                                Limpar filtros
                            </button>
                        </div>
                    </div>

                    <!-- Produtos Grid -->
                    <div id="productGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                        <!-- Products will be dynamically loaded here -->
                    </div>
                    
                    <!-- Load More Button -->
                    <div class="text-center mt-12">
                        <button id="loadMoreBtn" onclick="loadMoreProducts()" 
                                class="bg-lilas-500 hover:bg-lilas-600 text-white px-8 py-3 rounded-full font-bold transition-all mobile-touch-btn hidden">
                            Carregar Mais Produtos
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Blog Section -->
        <section id="blog" class="section hidden">
            <div class="py-16">
                <div class="container mx-auto px-4">
                    <h2 class="text-4xl font-bold text-center text-roxo-800 mb-12">Blog</h2>
                    <p class="text-center text-roxo-600 mb-12 max-w-2xl mx-auto">
                        Dicas, inspira√ß√µes e tutoriais sobre personaliza√ß√£o e presentes √∫nicos
                    </p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <!-- Blog Post 1 -->
                        <article class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow">
                            <img src="keys/blog-ideias-presentes?prompt=Ideias%20criativas%20para%20presentes%20personalizados%2C%20ambiente%20inspirador" 
                                 alt="10 Ideias Criativas para Presentes Personalizados" 
                                 class="w-full h-48 object-cover"
                                 loading="lazy">
                            <div class="p-6">
                                <div class="flex items-center mb-3">
                                    <span class="bg-lilas-100 text-lilas-800 px-3 py-1 rounded-full text-xs font-medium">Inspira√ß√£o</span>
                                    <span class="text-gray-500 text-sm ml-3">5 min de leitura</span>
                                </div>
                                <h3 class="text-xl font-bold text-roxo-800 mb-3">10 Ideias Criativas para Presentes Personalizados</h3>
                                <p class="text-roxo-600 mb-4">Descubra maneiras √∫nicas de tornar seus presentes inesquec√≠veis com personaliza√ß√£o criativa...</p>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-500">15 Jan 2025</span>
                                    <button onclick="openBlogPost('ideias-presentes')" 
                                            class="text-lilas-500 hover:text-lilas-600 font-medium">
                                        Ler mais <i class="fas fa-arrow-right ml-1"></i>
                                    </button>
                                </div>
                            </div>
                        </article>
                        
                        <!-- Blog Post 2 -->
                        <article class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow">
                            <img src="keys/blog-cuidados-produtos?prompt=Cuidados%20com%20produtos%20personalizados%2C%20lavagem%20e%20conserva%C3%A7%C3%A3o" 
                                 alt="Como Cuidar dos Seus Produtos Personalizados" 
                                 class="w-full h-48 object-cover"
                                 loading="lazy">
                            <div class="p-6">
                                <div class="flex items-center mb-3">
                                    <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs font-medium">Dicas</span>
                                    <span class="text-gray-500 text-sm ml-3">3 min de leitura</span>
                                </div>
                                <h3 class="text-xl font-bold text-roxo-800 mb-3">Como Cuidar dos Seus Produtos Personalizados</h3>
                                <p class="text-roxo-600 mb-4">Guia completo para manter seus produtos personalizados sempre novos e com cores vibrantes...</p>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-500">12 Jan 2025</span>
                                    <button onclick="openBlogPost('cuidados-produtos')" 
                                            class="text-lilas-500 hover:text-lilas-600 font-medium">
                                        Ler mais <i class="fas fa-arrow-right ml-1"></i>
                                    </button>
                                </div>
                            </div>
                        </article>
                        
                        <!-- Blog Post 3 -->
                        <article class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow">
                            <img src="keys/blog-tendencias?prompt=Tend%C3%AAncias%20em%20personaliza%C3%A7%C3%A3o%20de%20produtos%2C%20design%20moderno" 
                                 alt="Tend√™ncias em Personaliza√ß√£o para 2025" 
                                 class="w-full h-48 object-cover"
                                 loading="lazy">
                            <div class="p-6">
                                <div class="flex items-center mb-3">
                                    <span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-xs font-medium">Tend√™ncias</span>
                                    <span class="text-gray-500 text-sm ml-3">4 min de leitura</span>
                                </div>
                                <h3 class="text-xl font-bold text-roxo-800 mb-3">Tend√™ncias em Personaliza√ß√£o para 2025</h3>
                                <p class="text-roxo-600 mb-4">Fique por dentro das principais tend√™ncias em design e personaliza√ß√£o que est√£o dominando 2025...</p>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-500">8 Jan 2025</span>
                                    <button onclick="openBlogPost('tendencias-2025')" 
                                            class="text-lilas-500 hover:text-lilas-600 font-medium">
                                        Ler mais <i class="fas fa-arrow-right ml-1"></i>
                                    </button>
                                </div>
                            </div>
                        </article>
                    </div>
                    
                    <!-- Newsletter Signup in Blog -->
                    <div class="bg-gradient-to-r from-lilas-500 to-roxo-600 rounded-2xl p-8 text-center text-white mt-12">
                        <h3 class="text-2xl font-bold mb-4">Receba nossas novidades!</h3>
                        <p class="mb-6">Seja o primeiro a saber sobre novos posts, dicas exclusivas e promo√ß√µes especiais</p>
                        <div class="flex flex-col sm:flex-row gap-4 max-w-md mx-auto">
                            <input type="email" 
                                   id="blogNewsletterEmail" 
                                   placeholder="Seu melhor e-mail" 
                                   class="flex-1 px-4 py-3 rounded-lg text-gray-800 focus:ring-2 focus:ring-white focus:outline-none">
                            <button onclick="subscribeBlogNewsletter()" 
                                    class="bg-white text-lilas-600 px-6 py-3 rounded-lg font-bold hover:bg-gray-100 transition-colors mobile-touch-btn">
                                Inscrever-se
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Continue with other sections... -->
        <!-- (Previous sections remain the same, just add the new features) -->
        
        <!-- Personalizar Section -->
        <section id="personalizar" class="section hidden">
            <div class="py-16 bg-roxo-50">
                <div class="container mx-auto px-4">
                    <h2 class="text-4xl font-bold text-center text-roxo-800 mb-12">Personalize o Seu</h2>
                    <div class="max-w-2xl mx-auto bg-white rounded-2xl shadow-lg p-8">
                        <form id="customForm" onsubmit="submitCustomOrder(event)">
                            <div class="mb-6">
                                <label class="block text-roxo-800 font-medium mb-2">Tipo de Produto *</label>
                                <select id="productType" class="w-full border border-roxo-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-lilas-300" required>
                                    <option value="">Selecione o produto</option>
                                    <option value="camisa">Camisa Personalizada</option>
                                    <option value="caneca">Caneca Personalizada</option>
                                    <option value="ecobag">Ecobag Personalizada</option>
                                    <option value="kit">Kit Presente</option>
                                    <option value="toalhinha">Toalhinha Infantil</option>
                                    <option value="outro">Outro (especificar)</option>
                                </select>
                            </div>

                            <div class="mb-6">
                                <label class="block text-roxo-800 font-medium mb-2">Sua Ideia/Texto *</label>
                                <textarea id="customText" rows="4" placeholder="Descreva sua ideia, texto que quer incluir, ou envie sua arte..." 
                                          class="w-full border border-roxo-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-lilas-300" required></textarea>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                <div>
                                    <label class="block text-roxo-800 font-medium mb-2">Cor Preferida</label>
                                    <input type="text" id="preferredColor" placeholder="Ex: azul, rosa, vermelho..." 
                                           class="w-full border border-roxo-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-lilas-300">
                                </div>
                                <div>
                                    <label class="block text-roxo-800 font-medium mb-2">Tamanho (se aplic√°vel)</label>
                                    <select id="size" class="w-full border border-roxo-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-lilas-300">
                                        <option value="">Selecione</option>
                                        <option value="PP">PP</option>
                                        <option value="P">P</option>
                                        <option value="M">M</option>
                                        <option value="G">G</option>
                                        <option value="GG">GG</option>
                                        <option value="XGG">XGG</option>
                                    </select>
                                </div>
                            </div>

                            <div class="mb-6">
                                <label class="block text-roxo-800 font-medium mb-2">Nome/Dedicat√≥ria</label>
                                <input type="text" id="dedication" placeholder="Para quem √© o presente? Alguma dedicat√≥ria especial?" 
                                       class="w-full border border-roxo-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-lilas-300">
                            </div>

                            <div class="mb-6">
                                <label class="block text-roxo-800 font-medium mb-2">Seus Dados</label>
                                <input type="text" id="customerName" placeholder="Seu nome *" 
                                       class="w-full border border-roxo-200 rounded-lg px-4 py-3 mb-3 focus:ring-2 focus:ring-lilas-300" required>
                                <input type="tel" id="customerPhone" placeholder="Seu WhatsApp (com DDD) *" 
                                       class="w-full border border-roxo-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-lilas-300" required>
                            </div>

                            <button type="submit" class="w-full bg-lilas-500 hover:bg-lilas-600 text-white py-4 rounded-lg font-bold text-lg transition-colors mobile-touch-btn">
                                <i class="fas fa-paper-plane mr-2"></i>Enviar Minha Ideia
                            </button>
                        </form>
                    </div>

                    <!-- Informa√ß√µes Adicionais -->
                    <div class="max-w-4xl mx-auto mt-12 grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="text-center bg-white p-6 rounded-2xl shadow-lg">
                            <div class="w-16 h-16 bg-lilas-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-clock text-lilas-500 text-2xl"></i>
                            </div>
                            <h3 class="font-bold text-roxo-800 mb-2">Prazo de Entrega</h3>
                            <p class="text-roxo-600">7 a 15 dias √∫teis dependendo da complexidade</p>
                        </div>
                        <div class="text-center bg-white p-6 rounded-2xl shadow-lg">
                            <div class="w-16 h-16 bg-lilas-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-palette text-lilas-500 text-2xl"></i>
                            </div>
                            <h3 class="font-bold text-roxo-800 mb-2">Design Exclusivo</h3>
                            <p class="text-roxo-600">Criamos um layout √∫nico para aprova√ß√£o antes da produ√ß√£o</p>
                        </div>
                        <div class="text-center bg-white p-6 rounded-2xl shadow-lg">
                            <div class="w-16 h-16 bg-lilas-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-handshake text-lilas-500 text-2xl"></i>
                            </div>
                            <h3 class="font-bold text-roxo-800 mb-2">Garantia de Qualidade</h3>
                            <p class="text-roxo-600">Se n√£o ficar satisfeito, refazemos ou devolvemos o valor</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sobre Section -->
        <section id="sobre" class="section hidden">
            <div class="py-16">
                <div class="container mx-auto px-4">
                    <div class="max-w-4xl mx-auto">
                        <h2 class="text-4xl font-bold text-center text-roxo-800 mb-12">Quem Somos</h2>
                        
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center mb-16">
                            <div>
                                <img src="keys/atelier-studio-tati?prompt=Ateli√™%20artesanal%20acolhedor%20com%20materiais%20de%20artesanato%2C%20tecidos%20e%20ferramentas" 
                                     alt="Ateli√™ Studio Criativo Tati Motta" 
                                     class="w-full rounded-2xl shadow-lg"
                                     loading="lazy">
                            </div>
                            <div>
                                <h3 class="text-3xl font-bold text-roxo-800 mb-6">Nossa Hist√≥ria</h3>
                                <p class="text-roxo-600 mb-4 text-lg leading-relaxed">
                                    O <strong>Studio Criativo Tati Motta</strong> nasceu da paix√£o por transformar ideias em presentes √∫nicos e especiais. 
                                    Come√ßamos como um pequeno projeto familiar e hoje somos refer√™ncia em produtos personalizados.
                                </p>
                                <p class="text-roxo-600 mb-4 text-lg leading-relaxed">
                                    Cada pe√ßa √© criada com muito carinho e aten√ß√£o aos detalhes, porque acreditamos que 
                                    presentes personalizados carregam amor e criam mem√≥rias que duram para sempre.
                                </p>
                                <p class="text-roxo-600 text-lg leading-relaxed">
                                    Nossa miss√£o √© simples: <strong>fazer voc√™ sorrir</strong> atrav√©s de produtos √∫nicos 
                                    que contam sua hist√≥ria de um jeito especial.
                                </p>
                            </div>
                        </div>

                        <!-- Diferenciais -->
                        <h3 class="text-3xl font-bold text-center text-roxo-800 mb-12">Nossos Diferenciais</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                            <div class="text-center p-6 bg-white rounded-2xl shadow-lg">
                                <div class="w-20 h-20 bg-lilas-100 rounded-full flex items-center justify-center mx-auto mb-6">
                                    <i class="fas fa-hand-holding-heart text-lilas-500 text-3xl"></i>
                                </div>
                                <h4 class="text-xl font-bold text-roxo-800 mb-4">Produ√ß√£o Artesanal</h4>
                                <p class="text-roxo-600">Cada produto √© feito √† m√£o com cuidado e dedica√ß√£o exclusivos. N√£o fazemos em massa, fazemos com classe!</p>
                            </div>
                            <div class="text-center p-6 bg-white rounded-2xl shadow-lg">
                                <div class="w-20 h-20 bg-lilas-100 rounded-full flex items-center justify-center mx-auto mb-6">
                                    <i class="fas fa-shipping-fast text-lilas-500 text-3xl"></i>
                                </div>
                                <h4 class="text-xl font-bold text-roxo-800 mb-4">Atendimento R√°pido</h4>
                                <p class="text-roxo-600">Respondemos no WhatsApp em minutos! Tire suas d√∫vidas, acompanhe seu pedido e fale diretamente conosco.</p>
                            </div>
                            <div class="text-center p-6 bg-white rounded-2xl shadow-lg">
                                <div class="w-20 h-20 bg-lilas-100 rounded-full flex items-center justify-center mx-auto mb-6">
                                    <i class="fas fa-map-marker-alt text-lilas-500 text-3xl"></i>
                                </div>
                                <h4 class="text-xl font-bold text-roxo-800 mb-4">Produ√ß√£o Local</h4>
                                <p class="text-roxo-600">Apoie o com√©rcio local! Produzimos aqui na nossa regi√£o, gerando emprego e movimentando a economia.</p>
                            </div>
                        </div>

                        <!-- Pol√≠tica de Entrega -->
                        <div class="mt-16 bg-roxo-50 rounded-2xl p-8">
                            <h3 class="text-2xl font-bold text-roxo-800 mb-6 text-center">Pol√≠tica de Entrega e Trocas</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div>
                                    <h4 class="text-lg font-bold text-roxo-800 mb-3">üì¶ Entrega</h4>
                                    <ul class="text-roxo-600 space-y-2">
                                        <li>‚Ä¢ Prazo: 7 a 15 dias √∫teis</li>
                                        <li>‚Ä¢ Frete gr√°tis para pedidos acima de R$ 100</li>
                                        <li>‚Ä¢ Entregamos em todo o Brasil</li>
                                        <li>‚Ä¢ Voc√™ recebe o c√≥digo de rastreamento</li>
                                    </ul>
                                </div>
                                <div>
                                    <h4 class="text-lg font-bold text-roxo-800 mb-3">üîÑ Trocas</h4>
                                    <ul class="text-roxo-600 space-y-2">
                                        <li>‚Ä¢ 7 dias para trocas (defeito de fabrica√ß√£o)</li>
                                        <li>‚Ä¢ Produtos personalizados n√£o s√£o troc√°veis</li>
                                        <li>‚Ä¢ Frete de troca por nossa conta se erro nosso</li>
                                        <li>‚Ä¢ Entre em contato pelo WhatsApp</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Checkout Section -->
        <section id="checkout" class="section hidden">
            <div class="py-16 bg-gray-50">
                <div class="container mx-auto px-4">
                    <h2 class="text-4xl font-bold text-center text-roxo-800 mb-12">Finalizar Pedido</h2>
                    
                    <!-- Progress Bar -->
                    <div class="max-w-4xl mx-auto mb-8">
                        <div class="flex items-center justify-center space-x-4">
                            <div class="flex items-center">
                                <div class="w-8 h-8 bg-lilas-500 text-white rounded-full flex items-center justify-center font-bold text-sm">1</div>
                                <span class="ml-2 text-sm font-medium text-lilas-600">Carrinho</span>
                            </div>
                            <div class="w-16 h-1 bg-lilas-200"></div>
                            <div class="flex items-center">
                                <div class="w-8 h-8 bg-lilas-500 text-white rounded-full flex items-center justify-center font-bold text-sm">2</div>
                                <span class="ml-2 text-sm font-medium text-lilas-600">Dados</span>
                            </div>
                            <div class="w-16 h-1 bg-gray-300"></div>
                            <div class="flex items-center">
                                <div class="w-8 h-8 bg-gray-300 text-gray-600 rounded-full flex items-center justify-center font-bold text-sm">3</div>
                                <span class="ml-2 text-sm font-medium text-gray-500">Confirma√ß√£o</span>
                            </div>
                        </div>
                    </div>

                    <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <!-- Formul√°rio de Checkout -->
                        <div class="lg:col-span-2">
                            <form id="checkoutForm" onsubmit="processCheckout(event)" class="space-y-8">
                                <!-- Dados Pessoais -->
                                <div class="bg-white rounded-2xl shadow-lg p-6">
                                    <h3 class="text-2xl font-bold text-roxo-800 mb-6 flex items-center">
                                        <i class="fas fa-user text-lilas-500 mr-3"></i>
                                        Dados Pessoais
                                    </h3>
                                    
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-roxo-800 font-medium mb-2">Nome Completo *</label>
                                            <input type="text" name="fullName" required 
                                                   class="w-full border border-roxo-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-lilas-300 focus:border-lilas-300"
                                                   placeholder="Seu nome completo">
                                        </div>
                                        <div>
                                            <label class="block text-roxo-800 font-medium mb-2">CPF *</label>
                                            <input type="text" name="cpf" required 
                                                   class="w-full border border-roxo-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-lilas-300 focus:border-lilas-300"
                                                   placeholder="000.000.000-00"
                                                   maxlength="14">
                                        </div>
                                        <div>
                                            <label class="block text-roxo-800 font-medium mb-2">E-mail *</label>
                                            <input type="email" name="email" required 
                                                   class="w-full border border-roxo-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-lilas-300 focus:border-lilas-300"
                                                   placeholder="seu@email.com">
                                        </div>
                                        <div>
                                            <label class="block text-roxo-800 font-medium mb-2">WhatsApp *</label>
                                            <input type="tel" name="phone" required 
                                                   class="w-full border border-roxo-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-lilas-300 focus:border-lilas-300"
                                                   placeholder="(11) 99999-9999"
                                                   maxlength="15">
                                        </div>
                                    </div>
                                </div>

                                <!-- Endere√ßo de Entrega -->
                                <div class="bg-white rounded-2xl shadow-lg p-6">
                                    <h3 class="text-2xl font-bold text-roxo-800 mb-6 flex items-center">
                                        <i class="fas fa-map-marker-alt text-lilas-500 mr-3"></i>
                                        Endere√ßo de Entrega
                                    </h3>
                                    
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div class="md:col-span-1">
                                            <label class="block text-roxo-800 font-medium mb-2">CEP *</label>
                                            <input type="text" name="cep" required 
                                                   class="w-full border border-roxo-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-lilas-300 focus:border-lilas-300"
                                                   placeholder="00000-000"
                                                   maxlength="9"
                                                   onblur="searchCEP(this.value)">
                                        </div>
                                        <div class="md:col-span-1">
                                            <label class="block text-roxo-800 font-medium mb-2">Estado</label>
                                            <input type="text" name="state" 
                                                   class="w-full border border-roxo-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-lilas-300 focus:border-lilas-300"
                                                   placeholder="Ex: RJ" readonly>
                                        </div>
                                        <div class="md:col-span-2">
                                            <label class="block text-roxo-800 font-medium mb-2">Cidade</label>
                                            <input type="text" name="city" 
                                                   class="w-full border border-roxo-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-lilas-300 focus:border-lilas-300"
                                                   placeholder="Nome da cidade" readonly>
                                        </div>
                                        <div class="md:col-span-2">
                                            <label class="block text-roxo-800 font-medium mb-2">Endere√ßo *</label>
                                            <input type="text" name="address" required 
                                                   class="w-full border border-roxo-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-lilas-300 focus:border-lilas-300"
                                                   placeholder="Rua, avenida, etc.">
                                        </div>
                                        <div>
                                            <label class="block text-roxo-800 font-medium mb-2">N√∫mero *</label>
                                            <input type="text" name="number" required 
                                                   class="w-full border border-roxo-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-lilas-300 focus:border-lilas-300"
                                                   placeholder="123">
                                        </div>
                                        <div>
                                            <label class="block text-roxo-800 font-medium mb-2">Complemento</label>
                                            <input type="text" name="complement" 
                                                   class="w-full border border-roxo-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-lilas-300 focus:border-lilas-300"
                                                   placeholder="Apto, bloco, etc.">
                                        </div>
                                        <div class="md:col-span-2">
                                            <label class="block text-roxo-800 font-medium mb-2">Bairro *</label>
                                            <input type="text" name="neighborhood" required 
                                                   class="w-full border border-roxo-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-lilas-300 focus:border-lilas-300"
                                                   placeholder="Nome do bairro">
                                        </div>
                                    </div>
                                </div>

                                <!-- Forma de Pagamento -->
                                <div class="bg-white rounded-2xl shadow-lg p-6">
                                    <h3 class="text-2xl font-bold text-roxo-800 mb-6 flex items-center">
                                        <i class="fas fa-credit-card text-lilas-500 mr-3"></i>
                                        Forma de Pagamento
                                    </h3>
                                    
                                    <div class="space-y-4">
                                        <!-- PIX -->
                                        <label class="flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-lilas-300 transition-colors">
                                            <input type="radio" name="paymentMethod" value="pix" class="mr-4" checked>
                                            <div class="flex items-center flex-1">
                                                <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-4">
                                                    <i class="fas fa-qrcode text-green-600 text-xl"></i>
                                                </div>
                                                <div>
                                                    <h4 class="font-bold text-roxo-800">PIX</h4>
                                                    <p class="text-sm text-green-600 font-medium">üí∞ 5% de desconto</p>
                                                    <p class="text-sm text-gray-600">Aprova√ß√£o imediata</p>
                                                </div>
                                            </div>
                                        </label>

                                        <!-- Cart√£o de Cr√©dito -->
                                        <label class="flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-lilas-300 transition-colors">
                                            <input type="radio" name="paymentMethod" value="credit" class="mr-4">
                                            <div class="flex items-center flex-1">
                                                <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4">
                                                    <i class="fas fa-credit-card text-blue-600 text-xl"></i>
                                                </div>
                                                <div>
                                                    <h4 class="font-bold text-roxo-800">Cart√£o de Cr√©dito</h4>
                                                    <p class="text-sm text-blue-600 font-medium">üìÖ Parcele em at√© 12x sem juros</p>
                                                    <p class="text-sm text-gray-600">Via Mercado Pago</p>
                                                </div>
                                            </div>
                                        </label>

                                        <!-- Cart√£o de D√©bito -->
                                        <label class="flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-lilas-300 transition-colors">
                                            <input type="radio" name="paymentMethod" value="debit" class="mr-4">
                                            <div class="flex items-center flex-1">
                                                <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mr-4">
                                                    <i class="fas fa-credit-card text-purple-600 text-xl"></i>
                                                </div>
                                                <div>
                                                    <h4 class="font-bold text-roxo-800">Cart√£o de D√©bito</h4>
                                                    <p class="text-sm text-purple-600 font-medium">‚ö° Aprova√ß√£o r√°pida</p>
                                                    <p class="text-sm text-gray-600">Via Mercado Pago</p>
                                                </div>
                                            </div>
                                        </label>
                                    </div>
                                </div>

                                <!-- Observa√ß√µes -->
                                <div class="bg-white rounded-2xl shadow-lg p-6">
                                    <h3 class="text-2xl font-bold text-roxo-800 mb-6 flex items-center">
                                        <i class="fas fa-comment text-lilas-500 mr-3"></i>
                                        Observa√ß√µes
                                    </h3>
                                    
                                    <textarea name="observations" rows="4" 
                                              class="w-full border border-roxo-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-lilas-300 focus:border-lilas-300"
                                              placeholder="Alguma observa√ß√£o especial sobre seu pedido? (opcional)"></textarea>
                                </div>

                                <!-- Termos e Condi√ß√µes -->
                                <div class="bg-white rounded-2xl shadow-lg p-6">
                                    <label class="flex items-start">
                                        <input type="checkbox" name="acceptTerms" required class="mt-1 mr-3">
                                        <div class="text-sm text-gray-700">
                                            Eu aceito os <a href="#" class="text-lilas-500 hover:text-lilas-600 font-medium">termos e condi√ß√µes</a> e 
                                            autorizo o processamento dos meus dados pessoais conforme a 
                                            <a href="#" class="text-lilas-500 hover:text-lilas-600 font-medium">pol√≠tica de privacidade</a>.
                                        </div>
                                    </label>
                                </div>
                            </form>
                        </div>

                        <!-- Resumo do Pedido -->
                        <div class="lg:col-span-1">
                            <div class="bg-white rounded-2xl shadow-lg p-6 sticky top-24">
                                <h3 class="text-2xl font-bold text-roxo-800 mb-6 flex items-center">
                                    <i class="fas fa-shopping-bag text-lilas-500 mr-3"></i>
                                    Resumo do Pedido
                                </h3>

                                <!-- Items do Carrinho -->
                                <div id="checkoutItems" class="space-y-4 mb-6">
                                    <!-- Items ser√£o carregados dinamicamente -->
                                </div>

                                <!-- Cupom de Desconto -->
                                <div class="border-t border-gray-200 pt-4 mb-4">
                                    <div class="flex gap-2">
                                        <input type="text" id="couponCode" placeholder="C√≥digo do cupom" 
                                               class="flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-lilas-300">
                                        <button onclick="applyCoupon()" 
                                                class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm font-medium">
                                            Aplicar
                                        </button>
                                    </div>
                                </div>

                                <!-- C√°lculos -->
                                <div class="border-t border-gray-200 pt-4 space-y-3">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">Subtotal:</span>
                                        <span id="checkoutSubtotal" class="font-medium">R$ 0,00</span>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">Frete:</span>
                                        <span id="checkoutShipping" class="font-medium text-green-600">Gr√°tis</span>
                                    </div>
                                    <div id="pixDiscountRow" class="flex justify-between text-sm text-green-600 hidden">
                                        <span>Desconto PIX (5%):</span>
                                        <span id="pixDiscountValue">- R$ 0,00</span>
                                    </div>
                                    <div id="couponDiscountRow" class="flex justify-between text-sm text-blue-600 hidden">
                                        <span>Cupom de desconto:</span>
                                        <span id="couponDiscountValue">- R$ 0,00</span>
                                    </div>
                                    <div class="border-t border-gray-200 pt-3">
                                        <div class="flex justify-between text-lg font-bold text-roxo-800">
                                            <span>Total:</span>
                                            <span id="checkoutTotal" class="text-lilas-600">R$ 0,00</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Bot√£o de Finalizar -->
                                <button type="submit" form="checkoutForm" 
                                        class="w-full mt-6 bg-gradient-to-r from-lilas-500 to-roxo-600 hover:from-lilas-600 hover:to-roxo-700 text-white py-4 rounded-lg font-bold text-lg transition-all mobile-touch-btn">
                                    <span class="checkout-button-text">
                                        <i class="fas fa-lock mr-2"></i>Finalizar Pedido
                                    </span>
                                    <span class="checkout-loading-spinner hidden">
                                        <i class="fas fa-spinner fa-spin mr-2"></i>Processando...
                                    </span>
                                </button>

                                <!-- Seguran√ßa -->
                                <div class="mt-4 text-center">
                                    <div class="flex items-center justify-center text-xs text-gray-500 mb-2">
                                        <i class="fas fa-shield-alt mr-1"></i>
                                        Compra 100% segura e protegida
                                    </div>
                                    <div class="flex items-center justify-center space-x-2">
                                        <div class="bg-gray-100 px-2 py-1 rounded text-xs font-medium">SSL</div>
                                        <div class="bg-gray-100 px-2 py-1 rounded text-xs font-medium">Mercado Pago</div>
                                        <div class="bg-gray-100 px-2 py-1 rounded text-xs font-medium">LGPD</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contato Section -->
        <section id="contato" class="section hidden">
            <div class="py-16 bg-roxo-50">
                <div class="container mx-auto px-4">
                    <h2 class="text-4xl font-bold text-center text-roxo-800 mb-12">Entre em Contato</h2>
                    
                    <div class="max-w-4xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-12">
                        <!-- Informa√ß√µes de Contato -->
                        <div>
                            <h3 class="text-2xl font-bold text-roxo-800 mb-6">Fale Conosco</h3>
                            <div class="space-y-6">
                                <div class="flex items-start space-x-4">
                                    <div class="w-12 h-12 bg-lilas-100 rounded-full flex items-center justify-center flex-shrink-0">
                                        <i class="fab fa-whatsapp text-lilas-500 text-xl"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-roxo-800">WhatsApp</h4>
                                        <p class="text-roxo-600">Resposta em minutos!</p>
                                        <button onclick="openWhatsApp('Ol√°! Gostaria de mais informa√ß√µes üòä')" 
                                                class="text-lilas-500 hover:text-lilas-600 font-medium mobile-touch-btn">
                                            Chamar no WhatsApp
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-4">
                                    <div class="w-12 h-12 bg-lilas-100 rounded-full flex items-center justify-center flex-shrink-0">
                                        <i class="fas fa-envelope text-lilas-500 text-xl"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-roxo-800">E-mail</h4>
                                        <p class="text-roxo-600">contato@studiocriativotati.com.br</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-4">
                                    <div class="w-12 h-12 bg-lilas-100 rounded-full flex items-center justify-center flex-shrink-0">
                                        <i class="fas fa-clock text-lilas-500 text-xl"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-roxo-800">Hor√°rio de Atendimento</h4>
                                        <p class="text-roxo-600">Segunda a Sexta: 8h √†s 18h</p>
                                        <p class="text-roxo-600">S√°bado: 8h √†s 12h</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-4">
                                    <div class="w-12 h-12 bg-lilas-100 rounded-full flex items-center justify-center flex-shrink-0">
                                        <i class="fas fa-credit-card text-lilas-500 text-xl"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-roxo-800">Formas de Pagamento</h4>
                                        <p class="text-roxo-600">PIX, Cart√£o via Mercado Pago</p>
                                        <p class="text-roxo-600">Parcele em at√© 12x sem juros</p>
                                    </div>
                                </div>

                                <!-- Social Media Links -->
                                <div class="flex items-start space-x-4">
                                    <div class="w-12 h-12 bg-lilas-100 rounded-full flex items-center justify-center flex-shrink-0">
                                        <i class="fas fa-share-alt text-lilas-500 text-xl"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-roxo-800">Redes Sociais</h4>
                                        <div class="flex space-x-3 mt-2">
                                            <a href="#" class="text-blue-600 hover:text-blue-700 text-2xl" aria-label="Facebook">
                                                <i class="fab fa-facebook"></i>
                                            </a>
                                            <a href="https://www.instagram.com/tatimottastudiocriativo/" target="_blank" rel="noopener noreferrer" class="text-pink-600 hover:text-pink-700 text-2xl" aria-label="Instagram">
                                                <i class="fab fa-instagram"></i>
                                            </a>
                                            <a href="#" class="text-blue-400 hover:text-blue-500 text-2xl" aria-label="Twitter">
                                                <i class="fab fa-twitter"></i>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Formul√°rio de Contato -->
                        <div class="bg-white rounded-2xl shadow-lg p-8">
                            <h3 class="text-2xl font-bold text-roxo-800 mb-6">Envie uma Mensagem</h3>
                            <form onsubmit="sendContactMessage(event)" id="contactForm">
                                <div class="mb-4">
                                    <label class="block text-roxo-800 font-medium mb-2">Nome *</label>
                                    <input type="text" name="nome" required 
                                           class="w-full border border-roxo-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-lilas-300 focus:border-lilas-300">
                                </div>
                                <div class="mb-4">
                                    <label class="block text-roxo-800 font-medium mb-2">WhatsApp *</label>
                                    <input type="tel" name="whatsapp" required 
                                           class="w-full border border-roxo-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-lilas-300 focus:border-lilas-300"
                                           placeholder="(xx) xxxxx-xxxx">
                                </div>
                                <div class="mb-4">
                                    <label class="block text-roxo-800 font-medium mb-2">Assunto *</label>
                                    <select name="assunto" required 
                                            class="w-full border border-roxo-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-lilas-300 focus:border-lilas-300">
                                        <option value="">Selecione</option>
                                        <option value="orcamento">Solicitar Or√ßamento</option>
                                        <option value="duvida">Tirar D√∫vida</option>
                                        <option value="prazo">Consultar Prazo</option>
                                        <option value="acompanhar">Acompanhar Pedido</option>
                                        <option value="outros">Outros</option>
                                    </select>
                                </div>
                                <div class="mb-6">
                                    <label class="block text-roxo-800 font-medium mb-2">Mensagem *</label>
                                    <textarea rows="4" name="mensagem" required 
                                              class="w-full border border-roxo-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-lilas-300 focus:border-lilas-300"
                                              placeholder="Como podemos ajudar voc√™?"></textarea>
                                </div>
                                <button type="submit" 
                                        class="w-full bg-lilas-500 hover:bg-lilas-600 text-white py-3 rounded-lg font-bold transition-colors mobile-touch-btn">
                                    <span class="button-text">
                                        <i class="fas fa-paper-plane mr-2"></i>Enviar Mensagem
                                    </span>
                                    <span class="loading-spinner hidden"></span>
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-roxo-800 text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center space-x-2 mb-4">
                        <div class="w-8 h-8 bg-gradient-to-br from-lilas-400 to-lilas-500 rounded-full flex items-center justify-center">
                            <i class="fas fa-palette text-white text-sm"></i>
                        </div>
                        <h3 class="text-xl font-bold">Studio Criativo Tati Motta</h3>
                    </div>
                    <p class="text-roxo-200 mb-4">Transformando ideias em presentes √∫nicos desde 2020.</p>
                    <p class="text-roxo-300 text-sm"><strong>Seu estilo, do seu jeito.</strong></p>
                    
                    <!-- Newsletter Signup -->
                    <div class="mt-6">
                        <h4 class="font-bold mb-2">Newsletter</h4>
                        <div class="flex">
                            <input type="email" 
                                   id="footerNewsletterEmail" 
                                   placeholder="Seu e-mail" 
                                   class="flex-1 px-3 py-2 rounded-l-lg text-gray-800 text-sm focus:outline-none">
                            <button onclick="subscribeNewsletter('footerNewsletterEmail')" 
                                    class="bg-lilas-500 hover:bg-lilas-600 px-4 py-2 rounded-r-lg transition-colors">
                                <i class="fas fa-envelope"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h4 class="font-bold mb-4">Produtos</h4>
                    <ul class="space-y-2 text-roxo-200">
                        <li><a href="#" onclick="showSection('catalogo')" class="hover:text-white transition-colors">Camisetas</a></li>
                        <li><a href="#" onclick="showSection('catalogo')" class="hover:text-white transition-colors">Canecas</a></li>
                        <li><a href="#" onclick="showSection('catalogo')" class="hover:text-white transition-colors">Ecobags</a></li>
                        <li><a href="#" onclick="showSection('catalogo')" class="hover:text-white transition-colors">Kits Presente</a></li>
                        <li><a href="#" onclick="showSection('catalogo')" class="hover:text-white transition-colors">Toalhinhas</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-bold mb-4">Links √öteis</h4>
                    <ul class="space-y-2 text-roxo-200">
                        <li><a href="#" onclick="showSection('personalizar')" class="hover:text-white transition-colors">Personalizar</a></li>
                        <li><a href="#" onclick="showSection('sobre')" class="hover:text-white transition-colors">Sobre N√≥s</a></li>
                        <li><a href="#" onclick="showSection('blog')" class="hover:text-white transition-colors">Blog</a></li>
                        <li><a href="#" onclick="showSection('contato')" class="hover:text-white transition-colors">Contato</a></li>
                        <li><a href="#" onclick="showSection('sobre')" class="hover:text-white transition-colors">Pol√≠tica de Entrega</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-bold mb-4">Contato</h4>
                    <ul class="space-y-2 text-roxo-200">
                        <li>
                            <button onclick="openWhatsApp('Ol√°! Entrei em contato pelo site üòä')" 
                                    class="flex items-center space-x-2 hover:text-white transition-colors">
                                <i class="fab fa-whatsapp"></i>
                                <span>WhatsApp</span>
                            </button>
                        </li>
                        <li class="flex items-center space-x-2">
                            <i class="fas fa-envelope"></i>
                            <span>contato@studiocriativotati.com.br</span>
                        </li>
                        <li class="flex items-center space-x-2">
                            <i class="fas fa-clock"></i>
                            <span>Seg-Sex: 8h-18h</span>
                        </li>
                    </ul>
                    
                    <!-- Social Media -->
                    <div class="mt-4">
                        <h5 class="font-medium mb-2">Siga-nos</h5>
                        <div class="flex space-x-3">
                            <a href="#" class="text-roxo-200 hover:text-white text-xl transition-colors" aria-label="Facebook">
                                <i class="fab fa-facebook"></i>
                            </a>
                            <a href="https://www.instagram.com/tatimottastudiocriativo/" target="_blank" rel="noopener noreferrer" class="text-roxo-200 hover:text-white text-xl transition-colors" aria-label="Instagram">
                                <i class="fab fa-instagram"></i>
                            </a>
                            <a href="#" class="text-roxo-200 hover:text-white text-xl transition-colors" aria-label="Twitter">
                                <i class="fab fa-twitter"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-roxo-700 mt-8 pt-8 text-center text-roxo-300">
                <p>&copy; 2025 Studio Criativo Tati Motta. Todos os direitos reservados.</p>
                <p class="text-sm mt-2">Desenvolvido com ‚ù§Ô∏è para criar momentos √∫nicos</p>
            </div>
        </div>
    </footer>

    <!-- Floating Action Buttons -->
    <div class="floating-buttons">
        <!-- WhatsApp Float -->
        <button onclick="openWhatsApp('Ol√°! Gostaria de fazer um pedido üòä')" 
                class="whatsapp-float bg-green-500 hover:bg-green-600 text-white rounded-full shadow-lg mobile-touch-btn"
                aria-label="Contato WhatsApp">
            <i class="fab fa-whatsapp text-2xl"></i>
        </button>

        <!-- Cart Float -->
        <button onclick="toggleCart()" 
                class="cart-float bg-purple-500 hover:bg-purple-600 text-white rounded-full shadow-lg mobile-touch-btn relative"
                aria-label="Carrinho de compras">
            <i class="fas fa-shopping-cart text-lg"></i>
            <span id="cartCount" class="item-count hidden">0</span>
        </button>

        <!-- Wishlist Float -->
        <button onclick="toggleWishlistPanel()" 
                class="wishlist-float bg-red-500 hover:bg-red-600 text-white rounded-full shadow-lg mobile-touch-btn relative"
                aria-label="Lista de desejos">
            <i class="fas fa-heart text-lg"></i>
            <span id="wishlistCount" class="item-count hidden">0</span>
        </button>
    </div>

    <!-- Back to Top Button -->
    <button id="backToTop" 
            onclick="scrollToTop()" 
            class="fixed bottom-6 left-6 bg-lilas-500 hover:bg-lilas-600 text-white w-12 h-12 rounded-full shadow-lg flex items-center justify-center transition-all opacity-0 pointer-events-none mobile-touch-btn"
            aria-label="Voltar ao topo">
        <i class="fas fa-chevron-up"></i>
    </button>

    <!-- Modals and Overlays -->
    
    <!-- Newsletter Modal -->
    <div id="newsletterModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-2xl p-8 max-w-md mx-4">
            <div class="text-center">
                <div class="w-16 h-16 bg-lilas-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-envelope text-lilas-500 text-2xl"></i>
                </div>
                <h3 class="text-2xl font-bold text-roxo-800 mb-4">Receba Ofertas Exclusivas!</h3>
                <p class="text-roxo-600 mb-6">Cadastre-se e seja o primeiro a saber sobre promo√ß√µes, novos produtos e dicas exclusivas!</p>
                
                <div class="space-y-4">
                    <input type="email" 
                           id="modalNewsletterEmail" 
                           placeholder="Seu melhor e-mail" 
                           class="w-full border border-roxo-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-lilas-300">
                    <div class="flex gap-3">
                        <button onclick="subscribeNewsletter('modalNewsletterEmail')" 
                                class="flex-1 bg-lilas-500 hover:bg-lilas-600 text-white py-3 rounded-lg font-bold transition-colors">
                            Quero as ofertas!
                        </button>
                        <button onclick="closeNewsletterModal()" 
                                class="px-6 py-3 border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50 transition-colors">
                            Depois
                        </button>
                    </div>
                </div>
                
                <p class="text-xs text-gray-500 mt-4">*N√£o enviamos spam. Voc√™ pode cancelar a qualquer momento.</p>
            </div>
        </div>
    </div>

    <!-- Image Zoom Modal -->
    <div id="imageZoomModal" class="zoom-modal hidden" onclick="closeImageZoom()">
        <button class="absolute top-4 right-4 text-white text-2xl z-10" onclick="closeImageZoom()" aria-label="Fechar">
            <i class="fas fa-times"></i>
        </button>
        <img id="zoomedImage" src="" alt="" class="max-w-90 max-h-90">
        <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white text-center">
            <p id="zoomedImageTitle" class="font-medium"></p>
        </div>
    </div>

    <!-- Cart Panel -->
    <div id="cartPanel" class="fixed top-0 right-0 w-80 h-full bg-white shadow-xl z-50 transform translate-x-full transition-transform">
        <div class="p-6 border-b border-gray-200">
            <div class="flex justify-between items-center">
                <h3 class="text-xl font-bold text-roxo-800">Carrinho</h3>
                <button onclick="toggleCart()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
        </div>
        <div id="cartItems" class="p-6 flex-1 overflow-y-auto">
            <!-- Cart items will be dynamically added here -->
        </div>
        <div class="p-6 border-t border-gray-200">
            <div class="text-center">
                <div class="space-y-3">
                    <button onclick="proceedToCheckout()" 
                            class="w-full bg-lilas-500 hover:bg-lilas-600 text-white py-3 rounded-lg font-bold transition-colors mobile-touch-btn">
                        <i class="fas fa-shopping-cart mr-2"></i>Ir para Checkout
                    </button>
                    <button onclick="proceedToWhatsApp()" 
                            class="w-full bg-green-500 hover:bg-green-600 text-white py-3 rounded-lg font-bold transition-colors mobile-touch-btn">
                        <i class="fab fa-whatsapp mr-2"></i>Finalizar no WhatsApp
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Wishlist Panel -->
    <div id="wishlistPanel" class="fixed top-0 right-0 w-80 h-full bg-white shadow-xl z-50 transform translate-x-full transition-transform">
        <div class="p-6 border-b border-gray-200">
            <div class="flex justify-between items-center">
                <h3 class="text-xl font-bold text-roxo-800">Lista de Desejos</h3>
                <button onclick="toggleWishlistPanel()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
        </div>
        <div id="wishlistItems" class="p-6 flex-1 overflow-y-auto">
            <!-- Wishlist items will be dynamically added here -->
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg p-6 text-center">
            <div class="loading-spinner mx-auto mb-4 w-8 h-8"></div>
            <p class="text-roxo-800">Carregando...</p>
        </div>
    </div>

    <script type="module">
        // Global State Management
        const AppState = {
            cart: JSON.parse(localStorage.getItem('cart') || '[]'),
            wishlist: JSON.parse(localStorage.getItem('wishlist') || '[]'),
            currentSection: 'home',
            products: [],
            filteredProducts: [],
            searchResults: [],
            currentPage: 1,
            productsPerPage: 12,
            filters: {
                category: '',
                priceRange: '',
                sort: 'relevance',
                quickFilters: []
            },
            couponDiscount: 0,
            checkoutTotal: 0
        };

        // Utility Functions
        const debounce = (func, wait) => {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        };

        const formatPrice = (price) => {
            return new Intl.NumberFormat('pt-BR', {
                style: 'currency',
                currency: 'BRL'
            }).format(price);
        };

        const showNotification = (message, type = 'success') => {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 px-6 py-3 rounded-lg text-white font-medium transition-all transform translate-x-full`;
            notification.className += type === 'success' ? ' bg-green-500' : ' bg-red-500';
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        };

        // Analytics and Tracking
        const trackEvent = (eventName, eventData = {}) => {
            if (typeof gtag !== 'undefined') {
                gtag('event', eventName, eventData);
            }
            if (typeof fbq !== 'undefined') {
                fbq('track', eventName, eventData);
            }
            console.log('Event tracked:', eventName, eventData);
        };

        const trackPageView = (pageName) => {
            trackEvent('page_view', { page_title: pageName });
        };

        // Navigation Functions
        function showSection(sectionId) {
            console.log('Navigating to:', sectionId);
            
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show target section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.remove('hidden');
                AppState.currentSection = sectionId;
                updateBreadcrumbs(sectionId);
                trackPageView(sectionId);
                
                console.log('Section switched to:', sectionId, targetSection);
            } else {
                console.error('Section not found:', sectionId);
            }
            
            // Update navigation
            updateNavigation(sectionId);
            
            // Close mobile menu
            const mobileMenu = document.getElementById('mobileMenu');
            if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
                mobileMenu.classList.add('hidden');
            }
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            // Load section-specific content
            loadSectionContent(sectionId);
        }

        function updateBreadcrumbs(sectionId) {
            const breadcrumbs = document.getElementById('breadcrumbs');
            const currentPage = document.getElementById('currentPage');
            
            if (sectionId === 'home') {
                breadcrumbs.classList.add('hidden');
            } else {
                breadcrumbs.classList.remove('hidden');
                const sectionNames = {
                    'catalogo': 'Cat√°logo',
                    'personalizar': 'Personalizar',
                    'sobre': 'Sobre N√≥s',
                    'blog': 'Blog',
                    'contato': 'Contato'
                };
                currentPage.textContent = sectionNames[sectionId] || sectionId;
            }
        }

        function updateNavigation(sectionId) {
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('text-lilas-500', 'font-bold');
                link.classList.add('text-roxo-700');
            });
            
            const currentLink = document.querySelector(`[onclick*="showSection('${sectionId}')"]`);
            if (currentLink && currentLink.classList.contains('nav-link')) {
                currentLink.classList.remove('text-roxo-700');
                currentLink.classList.add('text-lilas-500', 'font-bold');
            }
        }

        function loadSectionContent(sectionId) {
            console.log('Loading content for section:', sectionId);
            switch(sectionId) {
                case 'catalogo':
                    // Ensure the catalog section is visible and load products
                    setTimeout(() => {
                        loadProducts();
                    }, 100);
                    break;
                case 'blog':
                    loadBlogPosts();
                    break;
                case 'checkout':
                    setTimeout(() => {
                        loadCheckoutData();
                        updateCheckoutUI();
                    }, 100);
                    break;
            }
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            if (menu) {
                menu.classList.toggle('hidden');
            }
        }

        // Search Functions
        function initializeSearch() {
            const searchInput = document.getElementById('searchInput');
            const mobileSearchInput = document.getElementById('mobileSearchInput');
            
            if (searchInput) {
                searchInput.addEventListener('input', debounce(handleSearch, 300));
                searchInput.addEventListener('focus', showSearchResults);
                searchInput.addEventListener('blur', hideSearchResults);
                
                // Enter key support
                searchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        const query = e.target.value.toLowerCase().trim();
                        if (query.length >= 2) {
                            showAllSearchResults(query);
                        }
                    }
                });
            }
            
            if (mobileSearchInput) {
                mobileSearchInput.addEventListener('input', debounce(handleSearch, 300));
                mobileSearchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        const query = e.target.value.toLowerCase().trim();
                        if (query.length >= 2) {
                            showAllSearchResults(query);
                        }
                    }
                });
            }
        }

        function handleSearch(event) {
            const query = event.target.value.toLowerCase().trim();
            
            if (query.length < 2) {
                hideSearchResults();
                return;
            }
            
            // Search in products
            const results = AppState.products.filter(product => 
                product.name.toLowerCase().includes(query) ||
                product.description.toLowerCase().includes(query) ||
                product.category.toLowerCase().includes(query)
            );
            
            AppState.searchResults = results;
            displaySearchResults(results, query);
            
            trackEvent('search', { search_term: query });
        }

        function displaySearchResults(results, query) {
            const searchResults = document.getElementById('searchResults');
            if (!searchResults) return;
            
            if (results.length === 0) {
                searchResults.innerHTML = `
                    <div class="p-4 text-center text-gray-500">
                        Nenhum resultado encontrado para "${query}"
                    </div>
                `;
            } else {
                searchResults.innerHTML = results.slice(0, 5).map(product => `
                    <div class="p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0"
                         onclick="selectSearchResult('${product.id}')">
                        <div class="flex items-center space-x-3">
                            <img src="${product.image}" alt="${product.name}" class="w-10 h-10 rounded object-cover">
                            <div>
                                <div class="font-medium text-sm">${product.name}</div>
                                <div class="text-xs text-gray-500">${product.price}</div>
                            </div>
                        </div>
                    </div>
                `).join('');
                
                if (results.length > 5) {
                    searchResults.innerHTML += `
                        <div class="p-3 text-center border-t border-gray-200">
                            <button onclick="showAllSearchResults('${query}')" class="text-lilas-500 text-sm font-medium">
                                Ver todos os ${results.length} resultados
                            </button>
                        </div>
                    `;
                }
            }
            
            searchResults.classList.remove('hidden');
        }

        function showSearchResults() {
            const searchResults = document.getElementById('searchResults');
            if (searchResults && !searchResults.classList.contains('hidden')) {
                searchResults.classList.remove('hidden');
            }
        }

        function hideSearchResults() {
            setTimeout(() => {
                const searchResults = document.getElementById('searchResults');
                if (searchResults) {
                    searchResults.classList.add('hidden');
                }
            }, 200);
        }

        function selectSearchResult(productId) {
            const product = AppState.products.find(p => p.id === productId);
            if (product) {
                showSection('catalogo');
                // Highlight the selected product
                setTimeout(() => {
                    const productElement = document.querySelector(`[data-product-id="${productId}"]`);
                    if (productElement) {
                        productElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        productElement.classList.add('ring-4', 'ring-lilas-300');
                        setTimeout(() => {
                            productElement.classList.remove('ring-4', 'ring-lilas-300');
                        }, 2000);
                    }
                }, 500);
            }
        }

        function showAllSearchResults(query) {
            showSection('catalogo');
            // Apply search filter
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.value = query;
            }
            // Filter products by search query
            const filtered = AppState.products.filter(product => 
                product.name.toLowerCase().includes(query.toLowerCase()) ||
                product.description.toLowerCase().includes(query.toLowerCase()) ||
                product.category.toLowerCase().includes(query.toLowerCase())
            );
            AppState.filteredProducts = filtered;
            AppState.currentPage = 1;
            renderProducts();
            updateResultsCount();
        }

        // Product Management
        function loadProducts() {
            showLoading();
            
            // Load products from admin panel or defaults
            let products = [];
            
            // First, try to load from admin panel
            const adminProducts = localStorage.getItem('products');
            const siteProducts = localStorage.getItem('siteProducts');
            
            console.log('Loading products from admin panel...', {
                adminProducts: !!adminProducts,
                siteProducts: !!siteProducts
            });
            
            if (adminProducts) {
                try {
                    products = JSON.parse(adminProducts);
                    console.log('‚úÖ Loaded', products.length, 'products from admin panel');
                    
                    // Also save to siteProducts for consistency
                    localStorage.setItem('siteProducts', JSON.stringify(products));
                } catch (e) {
                    console.error('Error parsing admin products:', e);
                    products = [];
                }
            } else if (siteProducts) {
                try {
                    products = JSON.parse(siteProducts);
                    console.log('‚úÖ Loaded', products.length, 'products from site storage');
                } catch (e) {
                    console.error('Error parsing site products:', e);
                    products = [];
                }
            }
            
            // If no products found, show empty message instead of defaults
            if (products.length === 0) {
                console.log('üì¶ No products found in admin panel - showing empty catalog');
                console.log('‚ö†Ô∏è Use o painel administrativo para adicionar produtos');
            } else {
                console.log('üéâ Successfully loaded products from admin panel!');
            }
            
            // Transform admin products to site format if needed
            const transformedProducts = products.map(product => {
                // If it's already in the right format, use as-is
                if (product.image && product.numericPrice) {
                    return product;
                }
                
                // Transform admin panel format to site format
                const transformed = {
                    id: product.id || `product-${Date.now()}`,
                    name: product.name || 'Produto Sem Nome',
                    description: product.description || 'Produto personalizado',
                    price: product.price || 'A partir de R$ 0,00',
                    numericPrice: product.numericPrice || extractNumericPrice(product.price),
                    category: product.category || 'outros',
                    image: getProductImage(product),
                    reference: product.reference || product.id,
                    rating: product.rating || 4.5,
                    reviews: product.reviews || 0,
                    featured: product.featured || false,
                    freeShipping: product.numericPrice >= 100 || false,
                    bestSeller: product.featured || false,
                    variants: product.variants || { colors: [], sizes: [] },
                    tags: product.tags || [],
                    briefingQuestions: product.briefingQuestions || []
                };
                
                return transformed;
            });
            
            AppState.products = transformedProducts;
            AppState.filteredProducts = transformedProducts;
            
            renderProducts();
            updateResultsCount();
            loadFeaturedProducts();
            hideLoading();
            
            console.log('üéØ Final products loaded:', AppState.products.length);
        }

        // Load featured products for homepage
        function loadFeaturedProducts() {
            const featuredGrid = document.getElementById('featuredProductsGrid');
            if (!featuredGrid) return;
            
            // Get featured products from the loaded products
            const featuredProducts = AppState.products.filter(product => product.featured).slice(0, 3);
            
            if (featuredProducts.length === 0) {
                // Show message if no featured products
                featuredGrid.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <div class="max-w-md mx-auto">
                            <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-star text-gray-400 text-2xl"></i>
                            </div>
                            <h4 class="text-xl font-bold text-gray-800 mb-3">Produtos em destaque em breve!</h4>
                            <p class="text-gray-600 mb-6">Estamos preparando produtos especiais para voc√™.</p>
                            <div class="space-y-3">
                                <button onclick="openWhatsApp('Ol√°! Gostaria de saber sobre produtos dispon√≠veis üòä')" 
                                        class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                                    <i class="fab fa-whatsapp mr-2"></i>Falar no WhatsApp
                                </button>
                                <button onclick="showSection('personalizar')" 
                                        class="bg-lilas-500 hover:bg-lilas-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                                    <i class="fas fa-palette mr-2"></i>Fazer Pedido Personalizado
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                return;
            }
            
            // Render featured products
            featuredGrid.innerHTML = featuredProducts.map(product => `
                <article class="product-card bg-white rounded-2xl shadow-lg overflow-hidden group">
                    <div class="product-gallery relative">
                        <img src="${product.image}" 
                             alt="${product.name}" 
                             class="w-full h-48 object-cover lazy-loading group-hover:scale-105 transition-transform duration-300"
                             loading="lazy"
                             onclick="openImageZoom('${product.image}', '${product.name}')">
                        <button onclick="toggleWishlist('${product.id}')" 
                                class="absolute top-4 right-4 w-10 h-10 bg-white rounded-full shadow-md flex items-center justify-center hover:bg-red-50 transition-colors">
                            <i class="far fa-heart text-red-500 wishlist-icon" data-product="${product.id}"></i>
                        </button>
                        ${product.bestSeller ? '<div class="absolute bottom-4 left-4 bg-green-500 text-white px-2 py-1 rounded text-xs font-bold">DESTAQUE</div>' : ''}
                    </div>
                    <div class="p-6">
                        <h4 class="text-xl font-bold text-roxo-800 mb-2">${product.name}</h4>
                        <p class="text-roxo-600 mb-3">${product.description}</p>
                        <div class="flex items-center mb-3">
                            <div class="rating-stars text-sm">
                                ${generateStars(product.rating)}
                            </div>
                            <span class="text-sm text-gray-500 ml-2">(${product.reviews} avalia√ß√µes)</span>
                        </div>
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-lg font-bold text-lilas-600">${product.price}</span>
                            ${product.freeShipping ? '<span class="text-sm text-green-600 font-medium">üöö Frete Gr√°tis</span>' : ''}
                        </div>
                        <div class="flex gap-2">
                            <button onclick="addToCart('${product.id}')" 
                                    class="flex-1 bg-roxo-500 hover:bg-roxo-600 text-white py-2 rounded-lg font-medium transition-colors mobile-touch-btn">
                                <i class="fas fa-shopping-cart mr-2"></i>Adicionar
                            </button>
                            <button onclick="openWhatsApp('Interesse no produto: ${product.name} - REF: ${product.reference}')" 
                                    class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-colors mobile-touch-btn">
                                <i class="fab fa-whatsapp"></i>
                            </button>
                        </div>
                    </div>
                </article>
            `).join('');
            
            // Initialize lazy loading for new images
            initializeLazyLoading();
        }

        // Helper function to extract numeric price from text
        function extractNumericPrice(priceText) {
            if (!priceText) return 0;
            
            const priceStr = priceText.toString().replace(/[^\d.,]/g, '');
            const priceMatch = priceStr.match(/[\d]+[,\.]?[\d]*/);
            
            if (priceMatch) {
                return parseFloat(priceMatch[0].replace(',', '.'));
            }
            
            return 0;
        }

        // Helper function to get product image from admin data
        function getProductImage(product) {
            // Priority order: uploadedImages, images array, default
            if (product.uploadedImages && product.uploadedImages.length > 0) {
                return product.uploadedImages[0].data;
            }
            
            if (product.images && product.images.length > 0 && product.images[0]) {
                const imageUrl = product.images[0];
                
                // If it's a keys/ URL, return as-is
                if (imageUrl.startsWith('keys/')) {
                    return imageUrl;
                }
                
                // If it's an asset ID, return as-is
                if (imageUrl.length > 10 && !imageUrl.includes('http')) {
                    return imageUrl;
                }
                
                // If it's a full URL, return as-is
                if (imageUrl.startsWith('http')) {
                    return imageUrl;
                }
                
                return imageUrl;
            }
            
            // Generate default image based on category
            const category = product.category || 'produto';
            const productName = (product.name || 'produto').toLowerCase().replace(/\s+/g, '-');
            
            let prompt = '';
            switch (category) {
                case 'camisas':
                    prompt = 'Camiseta%20personalizada%20mockup%20em%20fundo%20limpo';
                    break;
                case 'canecas':
                    prompt = 'Caneca%20personalizada%20mockup%20em%20mesa%20de%20madeira';
                    break;
                case 'ecobags':
                    prompt = 'Ecobag%20sustent√°vel%20mockup%20em%20fundo%20neutro';
                    break;
                case 'toalhinhas':
                    prompt = 'Toalhinhas%20infantis%20coloridas%20fofas';
                    break;
                default:
                    prompt = 'Produto%20personalizado%20mockup%20profissional';
            }
            
            return `keys/${productName}?prompt=${prompt}`;
        }

        // Auto-refresh products when admin panel updates
        function setupProductSync() {
            console.log('üîß Configurando sincroniza√ß√£o de produtos...');
            
            // Listen for storage changes (when admin panel saves)
            window.addEventListener('storage', function(e) {
                console.log('üì° Storage event recebido:', e.key, e.newValue ? 'com dados' : 'sem dados');
                
                if (e.key === 'products' || e.key === 'siteProducts') {
                    console.log('üîÑ Produtos atualizados no painel admin, recarregando...');
                    const oldCount = AppState.products.length;
                    loadProducts();
                    const newCount = AppState.products.length;
                    
                    console.log(`üìä Contagem: ${oldCount} ‚Üí ${newCount}`);
                    
                    // Show appropriate notification
                    if (newCount > oldCount) {
                        showNotification(`üÜï ${newCount - oldCount} novo(s) produto(s) adicionado(s)!`);
                    } else if (newCount < oldCount) {
                        showNotification(`üìù Produtos atualizados! (${newCount} no total)`);
                    } else if (newCount > 0) {
                        showNotification('‚úÖ Produtos sincronizados!');
                    }
                    
                    // Force re-render if we're on catalog page
                    if (AppState.currentSection === 'catalogo') {
                        renderProducts();
                        updateResultsCount();
                    }
                }
            });

            // Listen for custom product change events
            window.addEventListener('productDataChanged', function(e) {
                console.log('üéØ Evento customizado de produtos recebido:', e.detail);
                loadProducts();
                showNotification('‚úÖ Produtos sincronizados via evento customizado!');
                
                if (AppState.currentSection === 'catalogo') {
                    renderProducts();
                    updateResultsCount();
                }
            });

            // Custom event listener for manual synchronization
            window.addEventListener('forceProductSync', function(e) {
                console.log('üîÑ Sincroniza√ß√£o for√ßada acionada...');
                loadProducts();
                showNotification('üîÑ Produtos sincronizados manualmente!');
                
                if (AppState.currentSection === 'catalogo') {
                    renderProducts();
                    updateResultsCount();
                }
            });

            // Check for updates more frequently (every 10 seconds)
            setInterval(() => {
                try {
                    const currentProductsStr = localStorage.getItem('products');
                    const currentProducts = currentProductsStr ? JSON.parse(currentProductsStr) : [];
                    
                    if (currentProducts.length !== AppState.products.length) {
                        console.log('üîÑ Mudan√ßa na contagem de produtos detectada, recarregando...', {
                            antes: AppState.products.length,
                            agora: currentProducts.length
                        });
                        
                        loadProducts();
                        showNotification('üîÑ Cat√°logo atualizado automaticamente!');
                        
                        if (AppState.currentSection === 'catalogo') {
                            renderProducts();
                            updateResultsCount();
                        }
                    }
                } catch (error) {
                    console.error('Error in product sync check:', error);
                }
            }, 10000); // Reduzido para 10 segundos para melhor responsividade

            // Initial sync check
            setTimeout(() => {
                console.log('üîç Verifica√ß√£o inicial de sincroniza√ß√£o...');
                loadProducts();
                console.log(`üì¶ ${AppState.products.length} produto(s) carregado(s) na inicializa√ß√£o`);
            }, 2000);
        }

        function renderProducts(products = AppState.filteredProducts) {
            const productGrid = document.getElementById('productGrid');
            if (!productGrid) return;
            
            // Show empty state if no products
            if (products.length === 0) {
                productGrid.innerHTML = `
                    <div class="col-span-full text-center py-16">
                        <div class="max-w-md mx-auto">
                            <div class="w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6">
                                <i class="fas fa-box-open text-gray-400 text-4xl"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-gray-800 mb-4">Nenhum produto encontrado</h3>
                            <p class="text-gray-600 mb-6">Ainda n√£o h√° produtos cadastrados no cat√°logo.</p>
                            <div class="space-y-3">
                                <button onclick="openWhatsApp('Ol√°! Gostaria de conhecer os produtos dispon√≠veis üòä')" 
                                        class="block w-full bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                                    <i class="fab fa-whatsapp mr-2"></i>Falar no WhatsApp
                                </button>
                                <button onclick="showSection('personalizar')" 
                                        class="block w-full bg-lilas-500 hover:bg-lilas-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                                    <i class="fas fa-palette mr-2"></i>Fazer Pedido Personalizado
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                // Hide load more button
                const loadMoreBtn = document.getElementById('loadMoreBtn');
                if (loadMoreBtn) {
                    loadMoreBtn.classList.add('hidden');
                }
                return;
            }
            
            const startIndex = (AppState.currentPage - 1) * AppState.productsPerPage;
            const endIndex = startIndex + AppState.productsPerPage;
            const productsToShow = products.slice(startIndex, endIndex);
            
            if (AppState.currentPage === 1) {
                productGrid.innerHTML = '';
            }
            
            productsToShow.forEach(product => {
                const productElement = createProductCard(product);
                productGrid.appendChild(productElement);
            });
            
            // Show/hide load more button
            const loadMoreBtn = document.getElementById('loadMoreBtn');
            if (loadMoreBtn) {
                if (endIndex < products.length) {
                    loadMoreBtn.classList.remove('hidden');
                } else {
                    loadMoreBtn.classList.add('hidden');
                }
            }
            
            // Lazy load images
            initializeLazyLoading();
        }

        function createProductCard(product) {
            const productDiv = document.createElement('article');
            productDiv.className = 'product-item product-card bg-white rounded-2xl shadow-lg overflow-hidden group';
            productDiv.setAttribute('data-product-id', product.id);
            productDiv.setAttribute('data-category', product.category);
            productDiv.setAttribute('data-price', product.numericPrice);
            
            const badges = [];
            if (product.bestSeller) badges.push('<div class="absolute top-4 left-4 bg-red-500 text-white px-2 py-1 rounded text-xs font-bold">MAIS VENDIDO</div>');
            if (product.freeShipping) badges.push('<div class="absolute top-4 left-4 bg-green-500 text-white px-2 py-1 rounded text-xs font-bold">FRETE GR√ÅTIS</div>');
            if (product.category === 'ecobags') badges.push('<div class="absolute bottom-4 left-4 bg-green-600 text-white px-2 py-1 rounded text-xs font-bold">ECO-FRIENDLY</div>');
            
            productDiv.innerHTML = `
                <div class="product-gallery relative">
                    <img src="${product.image}" 
                         alt="${product.name}" 
                         class="w-full h-48 object-cover lazy-loading group-hover:scale-105 transition-transform duration-300"
                         loading="lazy"
                         onclick="openImageZoom('${product.image}', '${product.name}')">
                    <button onclick="toggleWishlist('${product.id}')" 
                            class="absolute top-4 right-4 w-10 h-10 bg-white rounded-full shadow-md flex items-center justify-center hover:bg-red-50 transition-colors">
                        <i class="far fa-heart text-red-500 wishlist-icon" data-product="${product.id}"></i>
                    </button>
                    ${badges.join('')}
                </div>
                <div class="p-6">
                    <h4 class="text-xl font-bold text-roxo-800 mb-2">${product.name}</h4>
                    <p class="text-roxo-600 mb-3">${product.description}</p>
                    <div class="flex items-center mb-3">
                        <div class="rating-stars text-sm">
                            ${generateStars(product.rating)}
                        </div>
                        <span class="text-sm text-gray-500 ml-2">(${product.reviews} avalia√ß√µes)</span>
                    </div>
                    <div class="flex justify-between items-center mb-4">
                        <span class="text-lg font-bold text-lilas-600">${product.price}</span>
                        ${product.freeShipping ? '<span class="text-sm text-green-600 font-medium">üöö Frete Gr√°tis</span>' : ''}
                    </div>
                    <div class="flex gap-2">
                        <button onclick="addToCart('${product.id}')" 
                                class="flex-1 bg-roxo-500 hover:bg-roxo-600 text-white py-2 rounded-lg font-medium transition-colors mobile-touch-btn">
                            <i class="fas fa-shopping-cart mr-2"></i>Adicionar
                        </button>
                        <button onclick="openWhatsApp('Interesse no produto: ${product.name} - REF: ${product.reference}')" 
                                class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-colors mobile-touch-btn">
                            <i class="fab fa-whatsapp"></i>
                        </button>
                    </div>
                </div>
            `;
            
            return productDiv;
        }

        function generateStars(rating) {
            if (!rating || isNaN(rating)) rating = 0;
            
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 !== 0;
            let stars = '';
            
            for (let i = 0; i < fullStars; i++) {
                stars += '<i class="fas fa-star"></i>';
            }
            
            if (hasHalfStar) {
                stars += '<i class="fas fa-star-half-alt"></i>';
            }
            
            const emptyStars = 5 - Math.ceil(rating);
            for (let i = 0; i < emptyStars; i++) {
                stars += '<i class="far fa-star"></i>';
            }
            
            return stars;
        }

        // Filter Functions
        function applyFilters() {
            const categoryFilter = document.getElementById('categoryFilter')?.value || '';
            const priceFilter = document.getElementById('priceFilter')?.value || '';
            const sortFilter = document.getElementById('sortFilter')?.value || 'relevance';
            
            AppState.filters.category = categoryFilter;
            AppState.filters.priceRange = priceFilter;
            AppState.filters.sort = sortFilter;
            AppState.currentPage = 1;
            
            let filtered = [...AppState.products];
            
            // Apply category filter
            if (categoryFilter) {
                filtered = filtered.filter(product => product.category === categoryFilter);
            }
            
            // Apply price filter
            if (priceFilter) {
                const [min, max] = priceFilter.split('-').map(p => p === '+' ? Infinity : parseInt(p));
                filtered = filtered.filter(product => {
                    const price = product.numericPrice;
                    return max ? (price >= min && price <= max) : price >= min;
                });
            }
            
            // Apply quick filters
            AppState.filters.quickFilters.forEach(filter => {
                if (filter === 'frete-gratis') {
                    filtered = filtered.filter(product => product.freeShipping);
                } else if (filter === 'mais-vendidos') {
                    filtered = filtered.filter(product => product.bestSeller);
                }
            });
            
            // Apply sorting
            filtered = sortProducts(filtered, sortFilter);
            
            AppState.filteredProducts = filtered;
            renderProducts();
            updateResultsCount();
            
            trackEvent('filter_applied', {
                category: categoryFilter,
                price_range: priceFilter,
                sort: sortFilter
            });
        }

        function sortProducts(products, sortBy) {
            switch(sortBy) {
                case 'price-low':
                    return products.sort((a, b) => a.numericPrice - b.numericPrice);
                case 'price-high':
                    return products.sort((a, b) => b.numericPrice - a.numericPrice);
                case 'rating':
                    return products.sort((a, b) => b.rating - a.rating);
                case 'newest':
                    return products.sort((a, b) => b.id.localeCompare(a.id));
                default:
                    return products.sort((a, b) => (b.featured ? 1 : 0) - (a.featured ? 1 : 0));
            }
        }

        function toggleQuickFilter(filterName) {
            const index = AppState.filters.quickFilters.indexOf(filterName);
            const button = document.querySelector(`[data-filter="${filterName}"]`);
            
            if (index > -1) {
                AppState.filters.quickFilters.splice(index, 1);
                button.classList.remove('bg-lilas-500', 'text-white');
                button.classList.add('border-roxo-200', 'hover:bg-roxo-50');
            } else {
                AppState.filters.quickFilters.push(filterName);
                button.classList.add('bg-lilas-500', 'text-white');
                button.classList.remove('border-roxo-200', 'hover:bg-roxo-50');
            }
            
            applyFilters();
        }

        function clearAllFilters() {
            // Reset filter UI
            document.getElementById('categoryFilter').value = '';
            document.getElementById('priceFilter').value = '';
            document.getElementById('sortFilter').value = 'relevance';
            
            // Reset quick filters
            document.querySelectorAll('.quick-filter-btn').forEach(btn => {
                btn.classList.remove('bg-lilas-500', 'text-white');
                btn.classList.add('border-roxo-200', 'hover:bg-roxo-50');
            });
            
            // Reset state
            AppState.filters = {
                category: '',
                priceRange: '',
                sort: 'relevance',
                quickFilters: []
            };
            AppState.currentPage = 1;
            
            // Show all products
            AppState.filteredProducts = AppState.products;
            renderProducts();
            updateResultsCount();
        }

        function updateResultsCount() {
            const currentResults = document.getElementById('currentResults');
            const totalResults = document.getElementById('totalResults');
            
            if (currentResults && totalResults) {
                const showing = Math.min(AppState.currentPage * AppState.productsPerPage, AppState.filteredProducts.length);
                currentResults.textContent = showing;
                totalResults.textContent = AppState.filteredProducts.length;
            }
        }

        function loadMoreProducts() {
            AppState.currentPage++;
            renderProducts();
            updateResultsCount();
        }

        // Cart Management
        function addToCart(productId) {
            console.log('Adding to cart - Product ID:', productId);
            
            // Procurar produto apenas nos produtos carregados do painel
            let product = AppState.products.find(p => p.id === productId);
            
            if (!product) {
                console.error('Product not found:', productId);
                showNotification('Produto n√£o dispon√≠vel. Fale conosco pelo WhatsApp!', 'error');
                
                // Redirecionar para WhatsApp se produto n√£o existir
                setTimeout(() => {
                    openWhatsApp(`Ol√°! Gostaria de saber sobre disponibilidade de produtos üòä`);
                }, 2000);
                return;
            }
            
            console.log('Product found:', product);
            
            // Garantir que numericPrice existe e √© um n√∫mero v√°lido
            let numericPrice = product.numericPrice;
            if (!numericPrice || isNaN(numericPrice)) {
                // Extrair pre√ßo num√©rico do campo price - mais robusta
                const priceText = product.price.replace(/[^\d,\.]/g, '');
                const priceMatch = priceText.match(/[\d]+[,\.]?[\d]*/);
                if (priceMatch) {
                    numericPrice = parseFloat(priceMatch[0].replace(',', '.'));
                } else {
                    // Valores padr√£o se n√£o conseguir extrair
                    if (product.id.includes('camisa')) numericPrice = 45;
                    else if (product.id.includes('caneca')) numericPrice = 35;
                    else if (product.id.includes('ecobag')) numericPrice = 25;
                    else numericPrice = 30;
                    console.warn('Could not extract price for product:', product.name, 'using default:', numericPrice);
                }
            }
            
            const existingItem = AppState.cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity = parseInt(existingItem.quantity) + 1;
                console.log('Updated existing item quantity:', existingItem.quantity);
            } else {
                const cartItem = {
                    ...product,
                    quantity: 1,
                    numericPrice: numericPrice,
                    addedAt: new Date().toISOString()
                };
                AppState.cart.push(cartItem);
                console.log('Added new item to cart:', cartItem);
            }
            
            updateCartStorage();
            updateCartUI();
            showNotification(`${product.name} adicionado ao carrinho!`);
            
            console.log('Cart updated, total items:', AppState.cart.length);
            
            trackEvent('add_to_cart', {
                item_id: productId,
                item_name: product.name,
                value: numericPrice,
                currency: 'BRL'
            });
        }

        function removeFromCart(productId) {
            AppState.cart = AppState.cart.filter(item => item.id !== productId);
            updateCartStorage();
            updateCartUI();
            renderCartItems();
        }

        function updateCartQuantity(productId, quantity) {
            const item = AppState.cart.find(item => item.id === productId);
            if (item) {
                if (quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    item.quantity = quantity;
                    updateCartStorage();
                    updateCartUI();
                    renderCartItems();
                }
            }
        }

        function updateCartStorage() {
            localStorage.setItem('cart', JSON.stringify(AppState.cart));
        }

        function updateCartUI() {
            const totalItems = AppState.cart.reduce((sum, item) => {
                const quantity = parseInt(item.quantity) || 0;
                return sum + quantity;
            }, 0);
            
            console.log('Updating cart UI:', {
                totalItems,
                cartLength: AppState.cart.length
            });
            
            // Update all possible cart count elements
            const cartCountSelectors = ['#cartCount', '.cart-count', '#cartCounter', '[data-cart-count]'];
            let elementUpdated = false;
            
            cartCountSelectors.forEach(selector => {
                const elements = document.querySelectorAll(selector);
                elements.forEach(element => {
                    if (element) {
                        element.textContent = totalItems;
                        
                        if (totalItems > 0) {
                            element.classList.remove('hidden');
                            element.style.display = 'flex';
                            element.style.visibility = 'visible';
                            element.style.opacity = '1';
                            
                            // Adicionar anima√ß√£o de "bounce" quando item √© adicionado
                            element.style.transform = 'scale(1.2)';
                            setTimeout(() => {
                                element.style.transform = 'scale(1)';
                            }, 200);
                        } else {
                            element.classList.add('hidden');
                            element.style.display = 'none';
                        }
                        
                        elementUpdated = true;
                    }
                });
            });
            
            if (!elementUpdated) {
                console.warn('No cart count elements found to update');
            } else {
                console.log('Cart count updated to:', totalItems);
            }
        }

        function toggleCart() {
            const cartPanel = document.getElementById('cartPanel');
            if (cartPanel.style.transform === 'translateX(0px)') {
                cartPanel.style.transform = 'translateX(100%)';
            } else {
                cartPanel.style.transform = 'translateX(0px)';
                renderCartItems();
            }
        }

        function renderCartItems() {
            const cartItems = document.getElementById('cartItems');
            if (!cartItems) return;
            
            console.log('Rendering cart items - Cart length:', AppState.cart.length);
            
            if (AppState.cart.length === 0) {
                cartItems.innerHTML = `
                    <div class="text-center py-8">
                        <i class="fas fa-shopping-cart text-gray-300 text-4xl mb-4"></i>
                        <p class="text-gray-500">Seu carrinho est√° vazio</p>
                        <button onclick="showSection('catalogo')" class="mt-4 bg-lilas-500 text-white px-4 py-2 rounded-lg">
                            Ver Produtos
                        </button>
                    </div>
                `;
                return;
            }
            
            let cartHTML = '';
            let cartTotal = 0;
            
            AppState.cart.forEach(item => {
                // Garantir que o item tem numericPrice
                if (!item.numericPrice) {
                    const priceMatch = item.price.match(/[\d,]+/);
                    if (priceMatch) {
                        item.numericPrice = parseFloat(priceMatch[0].replace(',', '.'));
                    } else {
                        item.numericPrice = 0;
                    }
                }
                
                const itemPrice = parseFloat(item.numericPrice) || 0;
                const itemQuantity = parseInt(item.quantity) || 1;
                const itemTotal = itemPrice * itemQuantity;
                cartTotal += itemTotal;
                
                cartHTML += `
                    <div class="flex items-center space-x-3 mb-4 p-3 border border-gray-200 rounded-lg">
                        <img src="${item.image}" alt="${item.name}" class="w-12 h-12 rounded object-cover">
                        <div class="flex-1">
                            <h4 class="font-medium text-sm">${item.name}</h4>
                            <p class="text-xs text-gray-500">${item.price}</p>
                            <p class="text-xs text-blue-600">Subtotal: ${formatPrice(itemTotal)}</p>
                            <div class="flex items-center mt-2">
                                <button onclick="updateCartQuantity('${item.id}', ${item.quantity - 1})" 
                                        class="w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center text-sm">-</button>
                                <span class="mx-2 text-sm">${item.quantity}</span>
                                <button onclick="updateCartQuantity('${item.id}', ${item.quantity + 1})" 
                                        class="w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center text-sm">+</button>
                            </div>
                        </div>
                        <button onclick="removeFromCart('${item.id}')" class="text-red-500 hover:text-red-700">
                            <i class="fas fa-trash text-sm"></i>
                        </button>
                    </div>
                `;
            });
            
            // Adicionar se√ß√£o do total
            cartHTML += `
                <div class="border-t border-gray-200 pt-4 mt-4">
                    <div class="flex justify-between items-center font-bold text-lg">
                        <span>Total:</span>
                        <span class="text-purple-600">${formatPrice(cartTotal)}</span>
                    </div>
                </div>
            `;
            
            cartItems.innerHTML = cartHTML;
            
            console.log('Cart rendered with total:', formatPrice(cartTotal));
            
            const totalValue = calculateCartTotal();
            
            const finalTotal = calculateCartTotal();
            console.log('Rendering cart with total:', finalTotal);
            
            cartItems.innerHTML = `
                ${AppState.cart.map(item => {
                    // Garantir que o item tem um pre√ßo num√©rico v√°lido
                    if (!item.numericPrice) {
                        const priceText = item.price.replace(/[^\d,\.]/g, '');
                        const priceMatch = priceText.match(/[\d]+[,\.]?[\d]*/);
                        if (priceMatch) {
                            item.numericPrice = parseFloat(priceMatch[0].replace(',', '.'));
                        } else {
                            item.numericPrice = 0;
                        }
                    }
                    
                    const itemPrice = parseFloat(item.numericPrice) || 0;
                    const itemQuantity = parseInt(item.quantity) || 1;
                    const itemTotal = itemPrice * itemQuantity;
                    
                    return `
                        <div class="flex items-center space-x-3 mb-4 p-3 border border-gray-200 rounded-lg">
                            <img src="${item.image}" alt="${item.name}" class="w-12 h-12 rounded object-cover">
                            <div class="flex-1">
                                <h4 class="font-medium text-sm">${item.name}</h4>
                                <p class="text-xs text-gray-500">${item.price}</p>
                                <p class="text-xs text-blue-600">Subtotal: ${formatPrice(itemTotal)}</p>
                                <div class="flex items-center mt-2">
                                    <button onclick="updateCartQuantity('${item.id}', ${item.quantity - 1})" 
                                            class="w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center text-sm">-</button>
                                    <span class="mx-2 text-sm">${item.quantity}</span>
                                    <button onclick="updateCartQuantity('${item.id}', ${item.quantity + 1})" 
                                            class="w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center text-sm">+</button>
                                </div>
                            </div>
                            <button onclick="removeFromCart('${item.id}')" class="text-red-500 hover:text-red-700">
                                <i class="fas fa-trash text-sm"></i>
                            </button>
                        </div>
                    `;
                }).join('')}
                <div class="border-t border-gray-200 pt-4 mt-4">
                    <div class="flex justify-between items-center font-bold text-lg">
                        <span>Total:</span>
                        <span class="text-purple-600">${formatPrice(finalTotal)}</span>
                    </div>
                </div>
            `;
        }

        function proceedToWhatsApp() {
            if (AppState.cart.length === 0) {
                showNotification('Seu carrinho est√° vazio!', 'error');
                return;
            }
            
            let message = 'üõí *CARRINHO DE COMPRAS*\n\n';
            let total = 0;
            
            AppState.cart.forEach(item => {
                const itemTotal = item.numericPrice * item.quantity;
                total += itemTotal;
                message += `üì¶ *${item.name}*\n`;
                message += `   Quantidade: ${item.quantity}\n`;
                message += `   Valor unit√°rio: ${item.price}\n`;
                message += `   Subtotal: ${formatPrice(itemTotal)}\n\n`;
            });
            
            message += `üí∞ *TOTAL: ${formatPrice(total)}*\n\n`;
            message += `Gostaria de finalizar este pedido! üòä`;
            
            openWhatsApp(message);
            
            trackEvent('begin_checkout', {
                value: total,
                currency: 'BRL',
                num_items: AppState.cart.length
            });
        }

        function proceedToCheckout() {
            if (AppState.cart.length === 0) {
                showNotification('Seu carrinho est√° vazio!', 'error');
                return;
            }
            
            console.log('Proceeding to checkout with', AppState.cart.length, 'items');
            
            // Close cart panel if open
            const cartPanel = document.getElementById('cartPanel');
            if (cartPanel) {
                cartPanel.style.transform = 'translateX(100%)';
            }
            
            showSection('checkout');
            
            // Wait for section to be visible, then load data
            setTimeout(() => {
                loadCheckoutData();
                updateCheckoutUI();
            }, 200);
            
            trackEvent('checkout_initiated', {
                value: calculateCartTotal(),
                currency: 'BRL',
                num_items: AppState.cart.length
            });
        }

        // Wishlist Management
        function toggleWishlist(productId) {
            const product = AppState.products.find(p => p.id === productId);
            if (!product) return;
            
            const index = AppState.wishlist.findIndex(item => item.id === productId);
            const icon = document.querySelector(`[data-product="${productId}"]`);
            
            if (index > -1) {
                AppState.wishlist.splice(index, 1);
                icon.classList.remove('fas');
                icon.classList.add('far');
                showNotification(`${product.name} removido da lista de desejos`);
            } else {
                AppState.wishlist.push({
                    ...product,
                    addedAt: new Date().toISOString()
                });
                icon.classList.remove('far');
                icon.classList.add('fas');
                showNotification(`${product.name} adicionado √† lista de desejos!`);
            }
            
            updateWishlistStorage();
            updateWishlistUI();
        }

        function updateWishlistStorage() {
            localStorage.setItem('wishlist', JSON.stringify(AppState.wishlist));
        }

        function updateWishlistUI() {
            // Update all possible wishlist count elements
            const wishlistCountSelectors = ['#wishlistCount', '.wishlist-count', '[data-wishlist-count]'];
            
            wishlistCountSelectors.forEach(selector => {
                const elements = document.querySelectorAll(selector);
                elements.forEach(element => {
                    if (element) {
                        if (AppState.wishlist.length > 0) {
                            element.textContent = AppState.wishlist.length;
                            element.classList.remove('hidden');
                            element.style.display = 'flex';
                        } else {
                            element.classList.add('hidden');
                            element.style.display = 'none';
                        }
                    }
                });
            });
            
            // Update all wishlist icons in the page
            document.querySelectorAll('[data-product]').forEach(icon => {
                const productId = icon.getAttribute('data-product');
                const isInWishlist = AppState.wishlist.some(item => item.id === productId);
                
                if (isInWishlist) {
                    icon.classList.remove('far');
                    icon.classList.add('fas');
                } else {
                    icon.classList.remove('fas');
                    icon.classList.add('far');
                }
            });
        }

        function toggleWishlistPanel() {
            const wishlistPanel = document.getElementById('wishlistPanel');
            if (wishlistPanel.style.transform === 'translateX(0px)') {
                wishlistPanel.style.transform = 'translateX(100%)';
            } else {
                wishlistPanel.style.transform = 'translateX(0px)';
                renderWishlistItems();
            }
        }

        function renderWishlistItems() {
            const wishlistItems = document.getElementById('wishlistItems');
            if (!wishlistItems) return;
            
            if (AppState.wishlist.length === 0) {
                wishlistItems.innerHTML = `
                    <div class="text-center py-8">
                        <i class="fas fa-heart text-gray-300 text-4xl mb-4"></i>
                        <p class="text-gray-500">Sua lista de desejos est√° vazia</p>
                        <button onclick="showSection('catalogo')" class="mt-4 bg-lilas-500 text-white px-4 py-2 rounded-lg">
                            Ver Produtos
                        </button>
                    </div>
                `;
                return;
            }
            
            wishlistItems.innerHTML = AppState.wishlist.map(item => `
                <div class="flex items-center space-x-3 mb-4 p-3 border border-gray-200 rounded-lg">
                    <img src="${item.image}" alt="${item.name}" class="w-12 h-12 rounded object-cover">
                    <div class="flex-1">
                        <h4 class="font-medium text-sm">${item.name}</h4>
                        <p class="text-xs text-gray-500">${item.price}</p>
                        <div class="flex gap-2 mt-2">
                            <button onclick="addToCart('${item.id}')" 
                                    class="text-xs bg-roxo-500 text-white px-2 py-1 rounded">
                                Adicionar ao Carrinho
                            </button>
                        </div>
                    </div>
                    <button onclick="toggleWishlist('${item.id}')" class="text-red-500 hover:text-red-700">
                        <i class="fas fa-heart"></i>
                    </button>
                </div>
            `).join('');
        }

        // Image Functions
        function openImageZoom(src, title) {
            const modal = document.getElementById('imageZoomModal');
            const image = document.getElementById('zoomedImage');
            const titleElement = document.getElementById('zoomedImageTitle');
            
            image.src = src;
            image.alt = title;
            titleElement.textContent = title;
            modal.classList.remove('hidden');
            
            trackEvent('image_zoom', { image_title: title });
        }

        function closeImageZoom() {
            const modal = document.getElementById('imageZoomModal');
            modal.classList.add('hidden');
        }

        // Form Functions
        function submitCustomOrder(event) {
            event.preventDefault();
            
            const formData = {
                productType: document.getElementById('productType').value,
                customText: document.getElementById('customText').value,
                preferredColor: document.getElementById('preferredColor').value,
                size: document.getElementById('size').value,
                dedication: document.getElementById('dedication').value,
                customerName: document.getElementById('customerName').value,
                customerPhone: document.getElementById('customerPhone').value
            };
            
            // Validate required fields
            if (!formData.productType || !formData.customText || !formData.customerName || !formData.customerPhone) {
                showNotification('Por favor, preencha todos os campos obrigat√≥rios', 'error');
                return;
            }
            
            let message = `üé® *PEDIDO PERSONALIZADO*\n\n`;
            message += `üë§ *Cliente:* ${formData.customerName}\n`;
            message += `üì± *WhatsApp:* ${formData.customerPhone}\n\n`;
            message += `üéÅ *Produto:* ${formData.productType}\n\n`;
            message += `üí≠ *Ideia/Texto:*\n${formData.customText}\n\n`;
            
            if (formData.preferredColor) {
                message += `üé® *Cor:* ${formData.preferredColor}\n`;
            }
            if (formData.size) {
                message += `üìè *Tamanho:* ${formData.size}\n`;
            }
            if (formData.dedication) {
                message += `üíù *Dedicat√≥ria:* ${formData.dedication}\n`;
            }
            
            message += `\n‚ú® Aguardo retorno com or√ßamento e prazo!`;
            
            openWhatsApp(message);
            
            // Reset form
            document.getElementById('customForm').reset();
            showNotification('Pedido enviado! Voc√™ ser√° redirecionado para o WhatsApp.');
            
            trackEvent('custom_order_submitted', {
                product_type: formData.productType,
                customer_name: formData.customerName
            });
        }

        function sendContactMessage(event) {
            event.preventDefault();
            
            const form = event.target;
            const submitButton = form.querySelector('button[type="submit"]');
            const buttonText = submitButton.querySelector('.button-text');
            const loadingSpinner = submitButton.querySelector('.loading-spinner');
            
            // Show loading state
            buttonText.classList.add('hidden');
            loadingSpinner.classList.remove('hidden');
            submitButton.disabled = true;
            
            const formData = new FormData(form);
            let message = `üìû *CONTATO PELO SITE*\n\n`;
            
            for (let [key, value] of formData.entries()) {
                if (value) {
                    const label = form.querySelector(`[name="${key}"]`).previousElementSibling?.textContent || key;
                    message += `${label}: ${value}\n`;
                }
            }
            
            // Simulate form processing
            setTimeout(() => {
                openWhatsApp(message);
                form.reset();
                showNotification('Mensagem enviada! Voc√™ ser√° redirecionado para o WhatsApp.');
                
                // Reset button state
                if (buttonText && loadingSpinner) {
                    buttonText.classList.remove('hidden');
                    loadingSpinner.classList.add('hidden');
                } else if (submitButton) {
                    submitButton.innerHTML = '<i class="fas fa-lock mr-2"></i>Finalizar Pedido';
                }
                
                if (submitButton) {
                    submitButton.disabled = false;
                }
                
                trackEvent('contact_form_submitted');
            }, 1500);
        }

        // Newsletter Functions
        function showNewsletterModal() {
            const modal = document.getElementById('newsletterModal');
            modal.classList.remove('hidden');
        }

        function closeNewsletterModal() {
            const modal = document.getElementById('newsletterModal');
            modal.classList.add('hidden');
        }

        function subscribeNewsletter(inputId) {
            const emailInput = document.getElementById(inputId);
            const email = emailInput.value.trim();
            
            if (!email || !isValidEmail(email)) {
                showNotification('Por favor, insira um e-mail v√°lido', 'error');
                return;
            }
            
            // Save to localStorage (in a real app, send to server)
            const subscribers = JSON.parse(localStorage.getItem('newsletter_subscribers') || '[]');
            if (!subscribers.includes(email)) {
                subscribers.push(email);
                localStorage.setItem('newsletter_subscribers', JSON.stringify(subscribers));
            }
            
            emailInput.value = '';
            showNotification('Obrigado! Voc√™ est√° inscrito na nossa newsletter!');
            closeNewsletterModal();
            
            trackEvent('newsletter_signup', { email: email });
        }

        function subscribeBlogNewsletter() {
            subscribeNewsletter('blogNewsletterEmail');
        }

        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        // Blog Functions
        function loadBlogPosts() {
            // In a real app, load from API
            console.log('Blog posts loaded');
        }

        function openBlogPost(postId) {
            // In a real app, open blog post page
            showNotification('Esta √© uma demonstra√ß√£o. O blog seria implementado em uma vers√£o completa.');
            trackEvent('blog_post_view', { post_id: postId });
        }

        // FAQ Functions
        function toggleFAQ(button) {
            const content = button.nextElementSibling;
            const icon = button.querySelector('i');
            
            if (content.classList.contains('open')) {
                content.classList.remove('open');
                icon.style.transform = 'rotate(0deg)';
            } else {
                // Close all other FAQ items
                document.querySelectorAll('.faq-content.open').forEach(item => {
                    item.classList.remove('open');
                    item.previousElementSibling.querySelector('i').style.transform = 'rotate(0deg)';
                });
                
                content.classList.add('open');
                icon.style.transform = 'rotate(180deg)';
            }
        }

        // Checkout Functions
        function loadCheckoutData() {
            console.log('Loading checkout data, cart items:', AppState.cart.length);
            renderCheckoutItems();
            calculateCheckoutTotals();
            setupPaymentMethodListeners();
        }

        function updateCheckoutUI() {
            // Force update the checkout displays
            const checkoutItemsEl = document.getElementById('checkoutItems');
            const checkoutSubtotalEl = document.getElementById('checkoutSubtotal');
            const checkoutTotalEl = document.getElementById('checkoutTotal');
            
            console.log('Updating checkout UI elements:', {
                checkoutItems: !!checkoutItemsEl,
                checkoutSubtotal: !!checkoutSubtotalEl,
                checkoutTotal: !!checkoutTotalEl,
                cartLength: AppState.cart.length
            });
            
            if (checkoutItemsEl && checkoutSubtotalEl && checkoutTotalEl) {
                renderCheckoutItems();
                calculateCheckoutTotals();
            }
        }

        function renderCheckoutItems() {
            const checkoutItems = document.getElementById('checkoutItems');
            if (!checkoutItems) {
                console.log('checkoutItems element not found');
                return;
            }

            console.log('Rendering checkout items, cart length:', AppState.cart.length);

            if (AppState.cart.length === 0) {
                checkoutItems.innerHTML = `
                    <div class="text-center py-8">
                        <i class="fas fa-shopping-cart text-gray-300 text-3xl mb-2"></i>
                        <p class="text-gray-500">Seu carrinho est√° vazio</p>
                        <button onclick="showSection('catalogo')" class="mt-3 bg-purple-500 text-white px-4 py-2 rounded-lg text-sm">
                            Ver Produtos
                        </button>
                    </div>
                `;
                return;
            }

            checkoutItems.innerHTML = AppState.cart.map(item => `
                <div class="flex items-center space-x-3 p-3 border border-gray-200 rounded-lg mb-3">
                    <img src="${item.image}" alt="${item.name}" class="w-12 h-12 rounded object-cover">
                    <div class="flex-1 min-w-0">
                        <h4 class="font-medium text-sm truncate">${item.name}</h4>
                        <p class="text-xs text-gray-500">Qtd: ${item.quantity}</p>
                        <p class="text-xs text-blue-600">${item.price} cada</p>
                    </div>
                    <div class="text-right">
                        <p class="font-medium text-sm">${formatPrice(item.numericPrice * item.quantity)}</p>
                    </div>
                </div>
            `).join('');
        }

        function calculateCartTotal() {
            if (!AppState.cart || AppState.cart.length === 0) {
                return 0;
            }
            
            const total = AppState.cart.reduce((sum, item) => {
                // Garantir que o item tem numericPrice v√°lido
                let itemPrice = 0;
                
                if (item.numericPrice && !isNaN(item.numericPrice)) {
                    itemPrice = parseFloat(item.numericPrice);
                } else if (item.price) {
                    // Extrair pre√ßo do texto se numericPrice n√£o existir
                    // Remover tudo exceto n√∫meros, v√≠rgulas e pontos
                    const priceText = item.price.replace(/[^\d,\.]/g, '');
                    const priceMatch = priceText.match(/[\d]+[,\.]?[\d]*/);
                    if (priceMatch) {
                        itemPrice = parseFloat(priceMatch[0].replace(',', '.'));
                    }
                }
                
                const quantity = parseInt(item.quantity) || 1;
                const itemTotal = itemPrice * quantity;
                
                console.log(`Item: ${item.name}, Price: ${itemPrice}, Qty: ${quantity}, Total: ${itemTotal}`);
                
                return sum + itemTotal;
            }, 0);
            
            console.log('Final cart total:', total);
            return total;
        }

        function calculateCheckoutTotals() {
            const subtotal = calculateCartTotal();
            const shipping = subtotal >= 100 ? 0 : 15; // Frete gr√°tis acima de R$ 100
            const paymentMethodElement = document.querySelector('input[name="paymentMethod"]:checked');
            const paymentMethod = paymentMethodElement ? paymentMethodElement.value : 'pix';
            
            let pixDiscount = 0;
            let couponDiscount = AppState.couponDiscount || 0;
            
            if (paymentMethod === 'pix') {
                pixDiscount = subtotal * 0.05; // 5% desconto PIX
            }
            
            const total = Math.max(0, subtotal + shipping - pixDiscount - couponDiscount);

            console.log('Calculating totals:', {
                subtotal,
                shipping,
                pixDiscount,
                couponDiscount,
                total,
                paymentMethod
            });

            // Update UI elements safely
            const elements = {
                subtotal: document.getElementById('checkoutSubtotal'),
                shipping: document.getElementById('checkoutShipping'),
                total: document.getElementById('checkoutTotal'),
                pixDiscountRow: document.getElementById('pixDiscountRow'),
                pixDiscountValue: document.getElementById('pixDiscountValue'),
                couponDiscountRow: document.getElementById('couponDiscountRow'),
                couponDiscountValue: document.getElementById('couponDiscountValue')
            };

            if (elements.subtotal) elements.subtotal.textContent = formatPrice(subtotal);
            if (elements.shipping) elements.shipping.textContent = shipping === 0 ? 'Gr√°tis' : formatPrice(shipping);
            if (elements.total) elements.total.textContent = formatPrice(total);

            // Show/hide PIX discount
            if (paymentMethod === 'pix' && pixDiscount > 0) {
                if (elements.pixDiscountValue) elements.pixDiscountValue.textContent = `- ${formatPrice(pixDiscount)}`;
                if (elements.pixDiscountRow) elements.pixDiscountRow.classList.remove('hidden');
            } else {
                if (elements.pixDiscountRow) elements.pixDiscountRow.classList.add('hidden');
            }

            // Show/hide coupon discount
            if (couponDiscount > 0) {
                if (elements.couponDiscountValue) elements.couponDiscountValue.textContent = `- ${formatPrice(couponDiscount)}`;
                if (elements.couponDiscountRow) elements.couponDiscountRow.classList.remove('hidden');
            } else {
                if (elements.couponDiscountRow) elements.couponDiscountRow.classList.add('hidden');
            }

            AppState.checkoutTotal = total;
            return total;
        }

        function setupPaymentMethodListeners() {
            // Remove existing listeners to avoid duplicates
            document.querySelectorAll('input[name="paymentMethod"]').forEach(radio => {
                const newRadio = radio.cloneNode(true);
                radio.parentNode.replaceChild(newRadio, radio);
            });
            
            // Add new listeners
            document.querySelectorAll('input[name="paymentMethod"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    console.log('Payment method changed to:', this.value);
                    calculateCheckoutTotals();
                });
            });
        }

        function applyCoupon() {
            const couponCode = document.getElementById('couponCode').value.trim().toUpperCase();
            
            if (!couponCode) {
                showNotification('Digite um c√≥digo de cupom', 'error');
                return;
            }

            // Simula√ß√£o de cupons v√°lidos
            const validCoupons = {
                'PRIMEIRA10': { discount: 10, type: 'percentage', description: '10% de desconto' },
                'FRETE20': { discount: 20, type: 'fixed', description: 'R$ 20 de desconto' },
                'NATAL15': { discount: 15, type: 'percentage', description: '15% de desconto' }
            };

            const coupon = validCoupons[couponCode];
            
            if (coupon) {
                const subtotal = calculateCartTotal();
                let discountValue = 0;
                
                if (coupon.type === 'percentage') {
                    discountValue = subtotal * (coupon.discount / 100);
                } else {
                    discountValue = coupon.discount;
                }
                
                AppState.couponDiscount = discountValue;
                calculateCheckoutTotals();
                showNotification(`Cupom aplicado! ${coupon.description}`);
                
                trackEvent('coupon_applied', {
                    coupon_code: couponCode,
                    discount_value: discountValue
                });
            } else {
                showNotification('Cupom inv√°lido ou expirado', 'error');
            }
        }

        function searchCEP(cep) {
            const cleanCEP = cep.replace(/\D/g, '');
            
            if (cleanCEP.length !== 8) return;

            // Simular busca de CEP (em produ√ß√£o, usar API real como ViaCEP)
            showLoading();
            
            setTimeout(() => {
                try {
                    // Dados simulados baseados no CEP
                    const addressData = {
                        city: cleanCEP.startsWith('20') ? 'Rio de Janeiro' : 'S√£o Paulo',
                        state: cleanCEP.startsWith('20') ? 'RJ' : 'SP',
                        neighborhood: cleanCEP.startsWith('20') ? 'Copacabana' : 'Vila Ol√≠mpia'
                    };
                    
                    const cityInput = document.querySelector('input[name="city"]');
                    const stateInput = document.querySelector('input[name="state"]');
                    const neighborhoodInput = document.querySelector('input[name="neighborhood"]');
                    
                    if (cityInput) cityInput.value = addressData.city;
                    if (stateInput) stateInput.value = addressData.state;
                    if (neighborhoodInput) neighborhoodInput.value = addressData.neighborhood;
                    
                    hideLoading();
                    showNotification('CEP encontrado!');
                } catch (error) {
                    console.error('Error in CEP search:', error);
                    hideLoading();
                    showNotification('Erro ao buscar CEP. Preencha manualmente.', 'error');
                }
            }, 1000);
        }

        function formatCPF(value) {
            return value
                .replace(/\D/g, '')
                .replace(/(\d{3})(\d)/, '$1.$2')
                .replace(/(\d{3})(\d)/, '$1.$2')
                .replace(/(\d{3})(\d{1,2})/, '$1-$2')
                .replace(/(-\d{2})\d+?$/, '$1');
        }

        function formatPhone(value) {
            return value
                .replace(/\D/g, '')
                .replace(/(\d{2})(\d)/, '($1) $2')
                .replace(/(\d{5})(\d)/, '$1-$2')
                .replace(/(-\d{4})\d+?$/, '$1');
        }

        function formatCEP(value) {
            return value
                .replace(/\D/g, '')
                .replace(/(\d{5})(\d)/, '$1-$2')
                .replace(/(-\d{3})\d+?$/, '$1');
        }

        function processCheckout(event) {
            event.preventDefault();
            
            console.log('Processing checkout...', event);
            
            const form = event.target;
            if (!form) {
                console.error('Form not found');
                showNotification('Erro no formul√°rio. Tente novamente.', 'error');
                return;
            }
            
            // Try to find submit button in different ways
            let submitButton = form.querySelector('button[type="submit"]');
            if (!submitButton) {
                submitButton = document.querySelector('button[form="checkoutForm"]');
            }
            
            if (!submitButton) {
                console.error('Submit button not found');
                showNotification('Erro no bot√£o. Tente novamente.', 'error');
                return;
            }
            
            const buttonText = submitButton.querySelector('.checkout-button-text');
            const loadingSpinner = submitButton.querySelector('.checkout-loading-spinner');
            
            console.log('Button elements found:', {
                submitButton: !!submitButton,
                buttonText: !!buttonText,
                loadingSpinner: !!loadingSpinner
            });
            
            // Show loading state only if elements exist
            if (buttonText) {
                buttonText.classList.add('hidden');
            } else {
                submitButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Processando...';
            }
            
            if (loadingSpinner) {
                loadingSpinner.classList.remove('hidden');
            }
            
            submitButton.disabled = true;
            
            // Collect form data
            const formData = new FormData(form);
            const orderData = {
                customer: {
                    fullName: formData.get('fullName'),
                    cpf: formData.get('cpf'),
                    email: formData.get('email'),
                    phone: formData.get('phone')
                },
                address: {
                    cep: formData.get('cep'),
                    state: formData.get('state'),
                    city: formData.get('city'),
                    address: formData.get('address'),
                    number: formData.get('number'),
                    complement: formData.get('complement'),
                    neighborhood: formData.get('neighborhood')
                },
                paymentMethod: formData.get('paymentMethod'),
                observations: formData.get('observations'),
                items: AppState.cart,
                totals: {
                    subtotal: calculateCartTotal(),
                    shipping: calculateCartTotal() >= 100 ? 0 : 15,
                    discount: (AppState.couponDiscount || 0) + (formData.get('paymentMethod') === 'pix' ? calculateCartTotal() * 0.05 : 0),
                    total: AppState.checkoutTotal
                }
            };
            
            // Validate form data
            if (!formData.get('fullName') || !formData.get('email') || !formData.get('phone')) {
                showNotification('Por favor, preencha todos os campos obrigat√≥rios', 'error');
                // Reset button state
                if (buttonText && loadingSpinner) {
                    buttonText.classList.remove('hidden');
                    loadingSpinner.classList.add('hidden');
                } else if (submitButton) {
                    submitButton.innerHTML = '<i class="fas fa-lock mr-2"></i>Finalizar Pedido';
                }
                if (submitButton) submitButton.disabled = false;
                return;
            }

            // Simulate processing
            setTimeout(() => {
                // Create WhatsApp message with order details
                let message = `üõí *NOVO PEDIDO - CHECKOUT COMPLETO*\n\n`;
                
                message += `üë§ *CLIENTE*\n`;
                message += `Nome: ${orderData.customer.fullName}\n`;
                message += `CPF: ${orderData.customer.cpf}\n`;
                message += `Email: ${orderData.customer.email}\n`;
                message += `WhatsApp: ${orderData.customer.phone}\n\n`;
                
                message += `üìç *ENTREGA*\n`;
                message += `${orderData.address.address}, ${orderData.address.number}`;
                if (orderData.address.complement) message += ` - ${orderData.address.complement}`;
                message += `\n${orderData.address.neighborhood} - ${orderData.address.city}/${orderData.address.state}\n`;
                message += `CEP: ${orderData.address.cep}\n\n`;
                
                message += `üõçÔ∏è *PRODUTOS*\n`;
                orderData.items.forEach(item => {
                    message += `‚Ä¢ ${item.name} (${item.quantity}x) - ${formatPrice(item.numericPrice * item.quantity)}\n`;
                });
                
                message += `\nüí≥ *PAGAMENTO*\n`;
                const paymentNames = {
                    'pix': 'PIX (5% desconto)',
                    'credit': 'Cart√£o de Cr√©dito',
                    'debit': 'Cart√£o de D√©bito'
                };
                message += `Forma: ${paymentNames[orderData.paymentMethod]}\n`;
                
                message += `\nüí∞ *VALORES*\n`;
                message += `Subtotal: ${formatPrice(orderData.totals.subtotal)}\n`;
                message += `Frete: ${orderData.totals.shipping === 0 ? 'Gr√°tis' : formatPrice(orderData.totals.shipping)}\n`;
                if (orderData.totals.discount > 0) {
                    message += `Desconto: -${formatPrice(orderData.totals.discount)}\n`;
                }
                message += `*TOTAL: ${formatPrice(orderData.totals.total)}*\n\n`;
                
                if (orderData.observations) {
                    message += `üìù *OBSERVA√á√ïES*\n${orderData.observations}\n\n`;
                }
                
                message += `‚úÖ Pedido confirmado! Aguardando processamento.`;
                
                // Send to WhatsApp
                openWhatsApp(message);
                
                // Clear cart
                AppState.cart = [];
                updateCartStorage();
                updateCartUI();
                
                // Show success message
                showNotification('Pedido enviado com sucesso! Voc√™ ser√° redirecionado para o WhatsApp.');
                
                // Reset form and redirect
                form.reset();
                setTimeout(() => {
                    showSection('home');
                }, 2000);
                
                // Reset button state
                buttonText.classList.remove('hidden');
                loadingSpinner.classList.add('hidden');
                submitButton.disabled = false;
                
                trackEvent('purchase', {
                    transaction_id: Date.now().toString(),
                    value: orderData.totals.total,
                    currency: 'BRL',
                    items: orderData.items.map(item => ({
                        item_id: item.id,
                        item_name: item.name,
                        quantity: item.quantity,
                        price: item.numericPrice
                    }))
                });
                
            }, 2000);
        }

        // Utility Functions
        function openWhatsApp(message) {
            const phoneNumber = '5522998809406';
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
            window.open(whatsappUrl, '_blank');
            
            trackEvent('whatsapp_click', { message_type: 'custom' });
        }

        function showLoading() {
            const overlay = document.getElementById('loadingOverlay');
            if (overlay) overlay.classList.remove('hidden');
        }

        function hideLoading() {
            const overlay = document.getElementById('loadingOverlay');
            if (overlay) overlay.classList.add('hidden');
        }

        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function initializeLazyLoading() {
            const images = document.querySelectorAll('img[loading="lazy"]');
            
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.addEventListener('load', () => {
                            img.classList.remove('lazy-loading');
                        });
                        observer.unobserve(img);
                    }
                });
            });
            
            images.forEach(img => {
                imageObserver.observe(img);
            });
        }

        function handleScrollEffects() {
            const scrollTop = window.pageYOffset;
            const backToTopBtn = document.getElementById('backToTop');
            
            // Show/hide back to top button
            if (scrollTop > 300) {
                backToTopBtn.style.opacity = '1';
                backToTopBtn.style.pointerEvents = 'auto';
            } else {
                backToTopBtn.style.opacity = '0';
                backToTopBtn.style.pointerEvents = 'none';
            }
        }

        function setupInputFormatters() {
            // CPF formatter
            document.addEventListener('input', function(e) {
                if (e.target.name === 'cpf') {
                    e.target.value = formatCPF(e.target.value);
                }
                if (e.target.name === 'phone') {
                    e.target.value = formatPhone(e.target.value);
                }
                if (e.target.name === 'cep') {
                    e.target.value = formatCEP(e.target.value);
                }
            });
        }

        // Error handling for critical functions
        function safeExecute(func, context = 'Unknown') {
            try {
                return func();
            } catch (error) {
                console.error(`Error in ${context}:`, error);
                return null;
            }
        }

        // Initialize everything when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Initializing enhanced website...');
            
            // Initialize with error handling
            safeExecute(() => initializeSearch(), 'Search initialization');
            safeExecute(() => setupProductSync(), 'Product sync setup');
            safeExecute(() => loadProducts(), 'Product loading');
            
            // Check if we have products from admin panel
            setTimeout(() => {
                safeExecute(() => {
                    const adminProducts = localStorage.getItem('products');
                    if (adminProducts) {
                        const products = JSON.parse(adminProducts);
                        console.log(`üéâ Conectado ao painel administrativo! ${products.length} produto(s) carregado(s).`);
                        
                        if (products.length > 0) {
                            showNotification(`Conectado ao painel! ${products.length} produto(s) carregado(s) üéâ`);
                        } else {
                            showNotification(`‚ö†Ô∏è Painel conectado mas sem produtos cadastrados`);
                        }
                    } else {
                        console.log('‚ö†Ô∏è Painel administrativo n√£o conectado ou sem produtos.');
                        showNotification(`üìù Use o painel administrativo para adicionar produtos`);
                    }
                }, 'Admin panel check');
            }, 1500);
            
            // Update UI states with error handling
            safeExecute(() => updateCartUI(), 'Cart UI update');
            safeExecute(() => updateWishlistUI(), 'Wishlist UI update');
            
            // Force floating buttons visibility with better error handling
            setTimeout(() => {
                safeExecute(() => {
                    const container = document.querySelector('.floating-buttons');
                    const cartButton = document.querySelector('.cart-float');
                    const whatsappButton = document.querySelector('.whatsapp-float');
                    const wishlistButton = document.querySelector('.wishlist-float');
                    
                    console.log('Floating buttons initialization:', {
                        container: !!container,
                        cartButton: !!cartButton,
                        whatsappButton: !!whatsappButton,
                        wishlistButton: !!wishlistButton
                    });
                    
                    // Force container styles
                    if (container) {
                        container.style.cssText = `
                            position: fixed !important;
                            bottom: 25px !important;
                            right: 25px !important;
                            z-index: 1000 !important;
                            display: flex !important;
                            flex-direction: column !important;
                            gap: 16px !important;
                        `;
                    }
                    
                    // Force button styles
                    [cartButton, whatsappButton, wishlistButton].forEach(btn => {
                        if (btn) {
                            btn.style.cssText += `
                                display: flex !important;
                                visibility: visible !important;
                                opacity: 1 !important;
                            `;
                        }
                    });
                    
                    console.log('‚úÖ Floating buttons configured');
                }, 'Floating buttons setup');
            }, 500);
            
            // Initialize other components
            safeExecute(() => initializeLazyLoading(), 'Lazy loading');
            safeExecute(() => setupInputFormatters(), 'Input formatters');
            
            // Add scroll listeners
            window.addEventListener('scroll', debounce(handleScrollEffects, 100));
            
            // Debug: Check if all sections exist
            const sections = ['home', 'catalogo', 'personalizar', 'sobre', 'blog', 'contato', 'checkout'];
            sections.forEach(sectionId => {
                const section = document.getElementById(sectionId);
                if (section) {
                    console.log(`‚úì Section ${sectionId} found`);
                } else {
                    console.error(`‚úó Section ${sectionId} NOT found`);
                }
            });
            
            // Show newsletter modal after 30 seconds (only on first visit)
            if (!localStorage.getItem('newsletter_shown')) {
                setTimeout(() => {
                    safeExecute(() => {
                        showNewsletterModal();
                        localStorage.setItem('newsletter_shown', 'true');
                    }, 'Newsletter modal');
                }, 30000);
            }
            
            // Track initial page view
            safeExecute(() => trackPageView('home'), 'Page view tracking');
            
            console.log('‚úÖ Website initialized successfully!');
        });

        // Debug function to check checkout
        window.debugCheckout = function() {
            console.log('=== CHECKOUT DEBUG ===');
            console.log('Cart items:', AppState.cart);
            console.log('Cart length:', AppState.cart.length);
            console.log('Checkout section exists:', !!document.getElementById('checkout'));
            console.log('Checkout items element:', !!document.getElementById('checkoutItems'));
            console.log('Current section:', AppState.currentSection);
            
            if (AppState.cart.length > 0) {
                console.log('Total value:', formatPrice(calculateCartTotal()));
            }
        };

        // Debug function for floating buttons
        window.debugFloatingButtons = function() {
            console.log('=== FLOATING BUTTONS DEBUG ===');
            const cartButton = document.querySelector('.cart-float');
            const whatsappButton = document.querySelector('.whatsapp-float');
            const wishlistButton = document.querySelector('.wishlist-float');
            const cartCount = document.getElementById('cartCount');
            const container = document.querySelector('.floating-buttons');
            
            console.log('Container exists:', !!container);
            console.log('Cart button exists:', !!cartButton);
            console.log('WhatsApp button exists:', !!whatsappButton);
            console.log('Wishlist button exists:', !!wishlistButton);
            console.log('Cart count element exists:', !!cartCount);
            
            if (cartButton) {
                const styles = getComputedStyle(cartButton);
                console.log('Cart button styles:', {
                    display: styles.display,
                    position: styles.position,
                    bottom: styles.bottom,
                    right: styles.right,
                    zIndex: styles.zIndex,
                    visibility: styles.visibility
                });
            }
            
            console.log('Cart items count:', AppState.cart.length);
        };

        // Debug function for cart functionality
        window.debugCart = function() {
            console.log('=== CART DEBUG ===');
            console.log('AppState.cart:', AppState.cart);
            console.log('Cart length:', AppState.cart.length);
            console.log('Cart total:', calculateCartTotal());
            
            // Test addToCart with destaque products
            console.log('Testing addToCart with camisa-destaque...');
            addToCart('camisa-destaque');
            
            console.log('After test - Cart length:', AppState.cart.length);
            console.log('After test - Cart items:', AppState.cart);
        };

        // Test button functionality
        window.testAddToCart = function(productId = 'camisa-destaque') {
            console.log('Testing addToCart function with productId:', productId);
            addToCart(productId);
        };

        // Manual sync function for debugging
        window.forceSyncProducts = function() {
            console.log('üîÑ Forcing product synchronization...');
            const event = new CustomEvent('forceProductSync');
            window.dispatchEvent(event);
        };

        // Debug functions
        window.debugState = function() {
            console.log('=== APP STATE DEBUG ===');
            console.log('Products:', AppState.products.length);
            console.log('Filtered Products:', AppState.filteredProducts.length);
            console.log('Cart:', AppState.cart.length);
            console.log('Wishlist:', AppState.wishlist.length);
            console.log('Current Section:', AppState.currentSection);
            console.log('Filters:', AppState.filters);
        };

        // Make functions globally available with error protection
        const globalFunctions = {
            showSection,
            selectSearchResult,
            showAllSearchResults,
            toggleMobileMenu,
            openWhatsApp,
            addToCart,
            removeFromCart,
            updateCartQuantity,
            toggleCart,
            proceedToWhatsApp,
            toggleWishlist,
            toggleWishlistPanel,
            openImageZoom,
            closeImageZoom,
            submitCustomOrder,
            sendContactMessage,
            showNewsletterModal,
            closeNewsletterModal,
            subscribeNewsletter,
            subscribeBlogNewsletter,
            openBlogPost,
            toggleFAQ,
            applyFilters,
            toggleQuickFilter,
            clearAllFilters,
            loadMoreProducts,
            scrollToTop,
            proceedToCheckout,
            applyCoupon,
            searchCEP,
            processCheckout,
            generateStars
        };

        // Safely assign to window
        Object.entries(globalFunctions).forEach(([name, func]) => {
            window[name] = function(...args) {
                return safeExecute(() => func.apply(this, args), `Global function: ${name}`);
            };
        });
    </script>
</body>
</html>